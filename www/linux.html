<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>章炎的主页</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="章炎的主页"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2012-08-29 16:56:26 CST"/>
<meta name="author" content="dirtysalt"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">章炎的主页</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 linux</a>
<ul>
<li><a href="#sec-1-1">1.1 proc文件系统</a>
<ul>
<li><a href="#sec-1-1-1">1.1.1 <i>proc/&lt;pid&gt;</i></a></li>
<li><a href="#sec-1-1-2">1.1.2 /proc/meminfo</a></li>
<li><a href="#sec-1-1-3">1.1.3 /proc/stat</a></li>
<li><a href="#sec-1-1-4">1.1.4 /proc/swaps</a></li>
<li><a href="#sec-1-1-5">1.1.5 /proc/cmdline</a></li>
<li><a href="#sec-1-1-6">1.1.6 /proc/uptime</a></li>
<li><a href="#sec-1-1-7">1.1.7 /proc/version</a></li>
<li><a href="#sec-1-1-8">1.1.8 /proc/mounts</a></li>
<li><a href="#sec-1-1-9">1.1.9 /proc/modules</a></li>
<li><a href="#sec-1-1-10">1.1.10 /proc/diskstats</a></li>
<li><a href="#sec-1-1-11">1.1.11 /proc/sys</a></li>
<li><a href="#sec-1-1-12">1.1.12 /proc/sys/vm/overcommit_memory</a></li>
<li><a href="#sec-1-1-13">1.1.13 /proc/sys/vm/overcommit_ratio</a></li>
<li><a href="#sec-1-1-14">1.1.14 /proc/sys/vm/swappiness</a></li>
<li><a href="#sec-1-1-15">1.1.15 /proc/sys/vm/dirty_*</a></li>
<li><a href="#sec-1-1-16">1.1.16 /proc/cpuinfo</a></li>
<li><a href="#sec-1-1-17">1.1.17 /proc/crypto</a></li>
<li><a href="#sec-1-1-18">1.1.18 /proc/loadavg</a></li>
<li><a href="#sec-1-1-19">1.1.19 /proc/locks</a></li>
<li><a href="#sec-1-1-20">1.1.20 /proc/slabinfo</a></li>
<li><a href="#sec-1-1-21">1.1.21 /proc/vmstat</a></li>
<li><a href="#sec-1-1-22">1.1.22 /proc/zoneinfo</a></li>
</ul>
</li>
<li><a href="#sec-1-2">1.2 vmlinuz</a></li>
<li><a href="#sec-1-3">1.3 系统工具</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1 mpstat</a></li>
<li><a href="#sec-1-3-2">1.3.2 vmstat</a></li>
<li><a href="#sec-1-3-3">1.3.3 free</a></li>
<li><a href="#sec-1-3-4">1.3.4 dmesg</a></li>
<li><a href="#sec-1-3-5">1.3.5 taskset</a></li>
<li><a href="#sec-1-3-6">1.3.6 lsof</a></li>
<li><a href="#sec-1-3-7">1.3.7 quota</a></li>
<li><a href="#sec-1-3-8">1.3.8 crontab</a></li>
<li><a href="#sec-1-3-9">1.3.9 hdparm</a></li>
<li><a href="#sec-1-3-10">1.3.10 nmon</a></li>
<li><a href="#sec-1-3-11">1.3.11 pmap</a></li>
<li><a href="#sec-1-3-12">1.3.12 strace</a></li>
<li><a href="#sec-1-3-13">1.3.13 uptime</a></li>
<li><a href="#sec-1-3-14">1.3.14 top</a></li>
<li><a href="#sec-1-3-15">1.3.15 pmap</a></li>
<li><a href="#sec-1-3-16">1.3.16 iostat</a></li>
<li><a href="#sec-1-3-17">1.3.17 blockdev</a></li>
<li><a href="#sec-1-3-18">1.3.18 systemtap</a></li>
<li><a href="#sec-1-3-19">1.3.19 latencytop</a></li>
<li><a href="#sec-1-3-20">1.3.20 iotop</a></li>
<li><a href="#sec-1-3-21">1.3.21 htop</a></li>
<li><a href="#sec-1-3-22">1.3.22 cssh</a></li>
<li><a href="#sec-1-3-23">1.3.23 dstat</a></li>
<li><a href="#sec-1-3-24">1.3.24 slurm</a></li>
<li><a href="#sec-1-3-25">1.3.25 sar</a></li>
<li><a href="#sec-1-3-26">1.3.26 netstat</a></li>
<li><a href="#sec-1-3-27">1.3.27 ifconfig</a></li>
<li><a href="#sec-1-3-28">1.3.28 /sbin/ip</a></li>
<li><a href="#sec-1-3-29">1.3.29 ping</a></li>
<li><a href="#sec-1-3-30">1.3.30 route</a></li>
<li><a href="#sec-1-3-31">1.3.31 tcpdump</a></li>
<li><a href="#sec-1-3-32">1.3.32 httperf</a></li>
<li><a href="#sec-1-3-33">1.3.33 ab</a></li>
<li><a href="#sec-1-3-34">1.3.34 autobench</a></li>
<li><a href="#sec-1-3-35">1.3.35 iftop</a></li>
<li><a href="#sec-1-3-36">1.3.36 iftraf</a></li>
<li><a href="#sec-1-3-37">1.3.37 rsync</a></li>
<li><a href="#sec-1-3-38">1.3.38 ttyload</a></li>
<li><a href="#sec-1-3-39">1.3.39 iodump</a></li>
<li><a href="#sec-1-3-40">1.3.40 iopp</a></li>
<li><a href="#sec-1-3-41">1.3.41 screen</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-2">2 index</a>
<ul>
<li><a href="#sec-2-1">2.1 Computer System</a></li>
<li><a href="#sec-2-2">2.2 Network Programming</a></li>
<li><a href="#sec-2-3">2.3 Storage System</a></li>
<li><a href="#sec-2-4">2.4 Distributed System</a></li>
<li><a href="#sec-2-5">2.5 Programming Language and Design Pattern</a></li>
<li><a href="#sec-2-6">2.6 Note</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> linux</h2>
<div class="outline-text-2" id="text-1">



</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> proc文件系统</h3>
<div class="outline-text-3" id="text-1-1">


</div>

<div id="outline-container-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> <i>proc/&lt;pid&gt;</i></h4>
<div class="outline-text-4" id="text-1-1-1">

<p>其中pid为对应的进程号，目录下面就是这个进程对应的信息。
</p><ul>
<li>attr ???
</li>
<li>auxv ???
</li>
<li>cgroup ???
</li>
<li>clear_refs ???
</li>
<li>cmdline 进程启动运行参数
</li>
<li>coredump_filter ???
</li>
<li>cpuset ???
</li>
<li>cwd 当前目录
</li>
<li>environ 环境变量
</li>
<li>exe 映像文件
</li>
<li>fd 打开fd
</li>
<li>fdinfo 打开fd对应信息(非常少).
</li>
<li>io 读写字节数目以及读写系统调用次数。
</li>
<li>limits 运行环境limits
</li>
<li>loginuid 运行程序用户登录的uid(不是euid).
</li>
<li>maps 进程运行内存镜像图示(文本)
</li>
<li>mountinfo 文件系统挂载信息
</li>
<li>mounts 文件系统挂载信息
</li>
<li>mountstatus 文件系统挂载信息
</li>
<li>net 网络信息
</li>
<li>numa_maps NUMA的内存映射 ???
</li>
<li>oom_adj 出现OOM时进程被kill的权值。
</li>
<li>oom_score 出现OOM时进程被kill的分值。
</li>
<li>pagemap 内存映像(二进制),类似于core
</li>
<li>personality ??
</li>
<li>root 根文件系统路径
</li>
<li>sched 进程调度信息
</li>
<li>sessionid ???
</li>
<li>smaps 进程运行内存镜像图示(文本)各个段大小
</li>
<li>stat 当前进程的状态信息
</li>
<li>statm 当前进程占用内存的状态信息
</li>
<li>status 进程运行系统状态
</li>
<li>syscall ???
</li>
<li>task 如果是多线程的话每个线程对应信息
</li>
<li>wchan ???
</li>
</ul>


<ul>
<li id="sec-1-1-1-1">fd<br/>
TODO(zhangyan04):

</li>
</ul>
<ul>
<li id="sec-1-1-1-2">io<br/>
TODO:

</li>
</ul>
<ul>
<li id="sec-1-1-1-3">limits<br/>
TODO:

</li>
</ul>
<ul>
<li id="sec-1-1-1-4">maps<br/>
当前进程关联到的每个可执行文件和库文件在内存中的映射区域及其访问权限所组成的列表

</li>
</ul>
<ul>
<li id="sec-1-1-1-5">mount<br/>
TODO:

</li>
</ul>
<ul>
<li id="sec-1-1-1-6">net<br/>
TODO(zhangyan04):

</li>
</ul>
<ul>
<li id="sec-1-1-1-7">sched<br/>
TODO(zhangyan04):

</li>
</ul>
<ul>
<li id="sec-1-1-1-8">status<br/>
TODO:

</li>
</ul>
</div>

</div>

<div id="outline-container-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> /proc/meminfo</h4>
<div class="outline-text-4" id="text-1-1-2">

<p>系统中关于当前内存的利用状况等的信息，常由free命令使用；可以使用文件查看命令直接读取此文件，其内容显示为两列，前者为统计属性，后者为对应的值；
</p>


<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/meminfo 
MemTotal:        3960316 kB
MemFree:          202908 kB
Buffers:           53632 kB
Cached:           764004 kB
SwapCached:       131884 kB
Active:          2484752 kB
Inactive:        1016724 kB
Active(anon):    2280636 kB
Inactive(anon):   814792 kB
Active(file):     204116 kB
Inactive(file):   201932 kB
Unevictable:          32 kB
Mlocked:              32 kB
SwapTotal:       4103164 kB
SwapFree:        2678984 kB
Dirty:              1492 kB
Writeback:             0 kB
AnonPages:       2629544 kB
Mapped:           122244 kB
Shmem:            411588 kB
Slab:             125096 kB
SReclaimable:      83480 kB
SUnreclaim:        41616 kB
KernelStack:        5904 kB
PageTables:        50164 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:     6083320 kB
Committed_AS:    7203968 kB
VmallocTotal:   34359738367 kB
VmallocUsed:      362948 kB
VmallocChunk:   34359276724 kB
HardwareCorrupted:     0 kB
AnonHugePages:         0 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
DirectMap4k:       57344 kB
DirectMap2M:     4052992 kB
</pre>


</div>

</div>

<div id="outline-container-1-1-3" class="outline-4">
<h4 id="sec-1-1-3"><span class="section-number-4">1.1.3</span> /proc/stat</h4>
<div class="outline-text-4" id="text-1-1-3">

<p>实时追踪自系统上次启动以来的多种统计信息；如下所示，其中，
</p><ul>
<li>“cpu”行后的八个值分别表示以1/100（jiffies）秒为单位的统计值（包括系统运行于用户模式、低优先级用户模式，运系统模式、空闲模式、I/O等待模式的时间等）；
</li>
<li>“intr”行给出中断的信息，第一个为自系统启动以来，发生的所有的中断的次数；然后每个数对应一个特定的中断自系统启动以来所发生的次数；
</li>
<li>“ctxt”给出了自系统启动以来CPU发生的上下文交换的次数。
</li>
<li>“btime”给出了从系统启动到现在为止的时间，单位为秒；
</li>
<li>“processes (total_forks) 自系统启动以来所创建的任务的个数目；
</li>
<li>“procs_running”：当前运行队列的任务的数目；
</li>
<li>“procs_blocked”：当前被阻塞的任务的数目；
</li>
</ul>





<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/stat 
cpu  25175536 13184 10088010 208990815 1165440 37 29476 0 0 0
cpu0 7597990 7286 3089511 49810301 706702 37 23258 0 0 0
cpu1 7914370 3065 2901460 50300065 188223 0 2403 0 0 0
cpu2 4922712 1228 2039477 54300492 171151 0 1921 0 0 0
cpu3 4740463 1604 2057560 54579955 99363 0 1892 0 0 0
intr 8881387947 2112 3 0 0 0 0 0 0 1 0 0 0 3175452 0 0 0 0 0 0 0 3554144 0 0 224677 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 6681668 12 51519086 12401 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0                                                                                                                                  
ctxt 12584201613
btime 1345525951
processes 234445
procs_running 3
procs_blocked 0
softirq 304218476 0 151026247 103572 14071723 3554590 0 262575 55846497 864372 78488900
</pre>


</div>

</div>

<div id="outline-container-1-1-4" class="outline-4">
<h4 id="sec-1-1-4"><span class="section-number-4">1.1.4</span> /proc/swaps</h4>
<div class="outline-text-4" id="text-1-1-4">

<p>当前系统上的交换分区及其空间利用信息，如果有多个交换分区的话，则会每个交换分区的信息分别存储于/proc/swap目录中的单独文件中，而其优先级数字越低，被使用到的可能性越大；
</p>



<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/swaps 
Filename                                Type            Size    Used    Priority
/dev/sda5                               partition       4103164 1423572 -1
</pre>



</div>

</div>

<div id="outline-container-1-1-5" class="outline-4">
<h4 id="sec-1-1-5"><span class="section-number-4">1.1.5</span> /proc/cmdline</h4>
<div class="outline-text-4" id="text-1-1-5">

<p>在启动时传递至内核的相关参数信息，这些信息通常由lilo或grub等启动管理工具进行传递；
</p>


<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/cmdline 
BOOT_IMAGE=/boot/vmlinuz-3.2.0-27-generic root=UUID=b25db1c7-e694-4eed-8d11-ea33047338cb ro quiet splash vt.handoff=7
</pre>


</div>

</div>

<div id="outline-container-1-1-6" class="outline-4">
<h4 id="sec-1-1-6"><span class="section-number-4">1.1.6</span> /proc/uptime</h4>
<div class="outline-text-4" id="text-1-1-6">

<p>系统上次启动以来的运行时间，如下所示，其第一个数字表示系统运行时间，第二个数字表示系统空闲时间，单位是秒；系统上次启动以来的运行时间，如下所示，其第一个数字表示系统运行时间，第二个数字表示系统空闲时间，单位是秒；
</p>



<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/uptime 
621137.39 2116303.76
</pre>


</div>

</div>

<div id="outline-container-1-1-7" class="outline-4">
<h4 id="sec-1-1-7"><span class="section-number-4">1.1.7</span> /proc/version</h4>
<div class="outline-text-4" id="text-1-1-7">

<p>当前系统运行的内核版本号
</p>



<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/version
Linux version 3.2.0-27-generic (buildd@allspice) (gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) ) #43-Ubuntu SMP Fri Jul 6 14:25:57 UTC 2012
</pre>





</div>

</div>

<div id="outline-container-1-1-8" class="outline-4">
<h4 id="sec-1-1-8"><span class="section-number-4">1.1.8</span> /proc/mounts</h4>
<div class="outline-text-4" id="text-1-1-8">

<p>系统当前挂载的所有文件系统.第一列表示挂载的设备，第二列表示在当前目录树中的挂载点，第三点表示当前文件系统的类型，第四列表示挂载属性（ro或者rw），第五列和第六列用来匹配/etc/mtab文件中的转储（dump）属性；
</p>


<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/mounts 
rootfs / rootfs rw 0 0
sysfs /sys sysfs rw,nosuid,nodev,noexec,relatime 0 0
proc /proc proc rw,nosuid,nodev,noexec,relatime 0 0
udev /dev devtmpfs rw,relatime,size=1971356k,nr_inodes=492839,mode=755 0 0
devpts /dev/pts devpts rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000 0 0
tmpfs /run tmpfs rw,nosuid,relatime,size=792064k,mode=755 0 0
/dev/disk/by-uuid/b25db1c7-e694-4eed-8d11-ea33047338cb / ext4 rw,relatime,errors=remount-ro,user_xattr,barrier=1,data=ordered 0 0
none /sys/fs/fuse/connections fusectl rw,relatime 0 0
none /sys/kernel/debug debugfs rw,relatime 0 0
none /sys/kernel/security securityfs rw,relatime 0 0
none /run/lock tmpfs rw,nosuid,nodev,noexec,relatime,size=5120k 0 0
none /run/shm tmpfs rw,nosuid,nodev,relatime 0 0
/dev/sda3 /home ext4 rw,relatime,user_xattr,barrier=1,data=ordered 0 0
binfmt_misc /proc/sys/fs/binfmt_misc binfmt_misc rw,nosuid,nodev,noexec,relatime 0 0
gvfs-fuse-daemon /home/dirlt/.gvfs fuse.gvfs-fuse-daemon rw,nosuid,nodev,relatime,user_id=1000,group_id=1000 0 0
</pre>


</div>

</div>

<div id="outline-container-1-1-9" class="outline-4">
<h4 id="sec-1-1-9"><span class="section-number-4">1.1.9</span> /proc/modules</h4>
<div class="outline-text-4" id="text-1-1-9">

<p>当前装入内核的所有模块名称列表，可以由lsmod命令使用，也可以直接查看；如下所示，其中第一列表示模块名，第二列表示此模块占用内存空间大小，第三列表示此模块有多少实例被装入，第四列表示此模块依赖于其它哪些模块，第五列表示此模块的装载状态（Live：已经装入；Loading：正在装入；Unloading：正在卸载），第六列表示此模块在内核内存（kernel memory）中的偏移量；
</p>


<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/modules 
pci_stub 12622 1 - Live 0x0000000000000000
vboxpci 23200 0 - Live 0x0000000000000000 (O)
vboxnetadp 13382 0 - Live 0x0000000000000000 (O)
vboxnetflt 23441 0 - Live 0x0000000000000000 (O)
vboxdrv 287082 3 vboxpci,vboxnetadp,vboxnetflt, Live 0x0000000000000000 (O)
bnep 18281 2 - Live 0x0000000000000000
rfcomm 47604 0 - Live 0x0000000000000000
bluetooth 180104 10 bnep,rfcomm, Live 0x0000000000000000
binfmt_misc 17540 1 - Live 0x0000000000000000
snd_hda_codec_realtek 223962 1 - Live 0x0000000000000000
ppdev 17113 0 - Live 0x0000000000000000
eeepc_wmi 13109 0 - Live 0x0000000000000000
asus_wmi 24456 1 eeepc_wmi, Live 0x0000000000000000
sparse_keymap 13890 1 asus_wmi, Live 0x0000000000000000
snd_hda_intel 33773 5 - Live 0x0000000000000000
snd_hda_codec 127706 2 snd_hda_codec_realtek,snd_hda_intel, Live 0x0000000000000000
snd_hwdep 13668 1 snd_hda_codec, Live 0x0000000000000000
snd_pcm 97188 3 snd_hda_intel,snd_hda_codec, Live 0x0000000000000000
snd_seq_midi 13324 0 - Live 0x0000000000000000
snd_rawmidi 30748 1 snd_seq_midi, Live 0x0000000000000000
snd_seq_midi_event 14899 1 snd_seq_midi, Live 0x0000000000000000
snd_seq 61896 2 snd_seq_midi,snd_seq_midi_event, Live 0x0000000000000000
snd_timer 29990 2 snd_pcm,snd_seq, Live 0x0000000000000000
snd_seq_device 14540 3 snd_seq_midi,snd_rawmidi,snd_seq, Live 0x0000000000000000
parport_pc 32866 1 - Live 0x0000000000000000
snd 78855 18 snd_hda_codec_realtek,snd_hda_intel,snd_hda_codec,snd_hwdep,snd_pcm,snd_rawmidi,snd_seq,snd_timer,snd_seq_device, Live 0
x0000000000000000                                                                                                                   
psmouse 87692 0 - Live 0x0000000000000000
serio_raw 13211 0 - Live 0x0000000000000000
soundcore 15091 1 snd, Live 0x0000000000000000
snd_page_alloc 18529 2 snd_hda_intel,snd_pcm, Live 0x0000000000000000
mac_hid 13253 0 - Live 0x0000000000000000
i915 472897 3 - Live 0x0000000000000000
wmi 19256 1 asus_wmi, Live 0x0000000000000000
drm_kms_helper 46978 1 i915, Live 0x0000000000000000
drm 242038 4 i915,drm_kms_helper, Live 0x0000000000000000
i2c_algo_bit 13423 1 i915, Live 0x0000000000000000
mei 41616 0 - Live 0x0000000000000000 (C)
video 19596 1 i915, Live 0x0000000000000000
lp 17799 0 - Live 0x0000000000000000
parport 46562 3 ppdev,parport_pc,lp, Live 0x0000000000000000
usbhid 47199 0 - Live 0x0000000000000000
hid 99559 1 usbhid, Live 0x0000000000000000
r8169 62099 0 - Live 0x0000000000000000
</pre>


</div>

</div>

<div id="outline-container-1-1-10" class="outline-4">
<h4 id="sec-1-1-10"><span class="section-number-4">1.1.10</span> /proc/diskstats</h4>
<div class="outline-text-4" id="text-1-1-10">

<p>每块磁盘设备的磁盘I/O统计信息列表
</p>
</div>

</div>

<div id="outline-container-1-1-11" class="outline-4">
<h4 id="sec-1-1-11"><span class="section-number-4">1.1.11</span> /proc/sys</h4>
<div class="outline-text-4" id="text-1-1-11">

<p>在/proc/sys下面有一些可以动态修改的内核参数，有两种方式可以修改这些参数。
</p>
<p>
首先可以使用sysctl工具来进行修改。比如如果想修改sys/vm/swappiness==0的话，那么可以
</p>


<pre class="example">dirlt@dirlt-virtual-machine:~/github/sperm/essay$ sudo sysctl vm.swappiness=0
[sudo] password for dirlt:
vm.swappiness = 0
</pre>


<p>
上面修改方式是临时的，如果想进行永久修改的话可以修改/etc/sysctl.conf文件
</p>


<pre class="example">vm.swappiness = 0
</pre>

<p>
然后重启那么这个设置就会永久生效。
</p>
</div>

</div>

<div id="outline-container-1-1-12" class="outline-4">
<h4 id="sec-1-1-12"><span class="section-number-4">1.1.12</span> /proc/sys/vm/overcommit_memory</h4>
<div class="outline-text-4" id="text-1-1-12">

<p>所谓的overcommit是过量使用的意思。
</p><ul>
<li>OVERCOMMIT_GUESS=0 用户申请内存的时候，系统会判断剩余的内存有多少。如果不够的话那么就会失败。这种方式是比较保守的，因为有时候比如用户申请1G内存但是可能只是会使用其中1K.
</li>
<li>OVERCOMMIT_ALWAYS=1 用户申请内存的时候，系统不进行任何检查认为内存足够使用，直到使用内存超过可用内存。
</li>
<li>OVERCOMMIT_NEVER=2 用户一次申请内存的大小不允许超过&lt;可用内存&gt;的大小。关于这个&lt;可用内存&gt;的大小计算可以看下面overcommit_ration这个参数，可以上面两种所说的可用内存不太一样。
</li>
</ul>


</div>

</div>

<div id="outline-container-1-1-13" class="outline-4">
<h4 id="sec-1-1-13"><span class="section-number-4">1.1.13</span> /proc/sys/vm/overcommit_ratio</h4>
<div class="outline-text-4" id="text-1-1-13">

<p>如果overcommit_memory值为2的话，那么这个参数决定了系统的&lt;可用内存&gt;的大小。计算方式是 (Physical-RAM-Size) - ratio / 100 + (Swap-Size).
</p>


<pre class="example">dirlt@dirlt-virtual-machine:~/github/sperm/essay$ free -m
             total       used       free     shared    buffers     cached
Mem:           491        484          6          0         43        296
-/+ buffers/cache:        145        346
Swap:          509          0        509
dirlt@dirlt-virtual-machine:~/github/sperm/essay$ cat /proc/sys/vm/overcommit_ratio
50
</pre>

<p>
所以对于我这个系统来说，可用的虚拟内存在(491*50/100)+509=754M. NOTE(dirlt):这个仅仅是在overcommit_memory=2的时候估算的&lt;可用内存&gt;大小，
实际上对于其他情况来说可用内存大小还是(Physical-RAM-Size) + (Swap-Size).
</p>
</div>

</div>

<div id="outline-container-1-1-14" class="outline-4">
<h4 id="sec-1-1-14"><span class="section-number-4">1.1.14</span> /proc/sys/vm/swappiness</h4>
<div class="outline-text-4" id="text-1-1-14">

<p>这个参数决定系统使用swap的程度。但是这个参数并没有禁止使用swap分区，而只是一个依赖于swap分区的程度。
如果这个值设置成为0的话那么，那么系统会尽可能地将减少page swap in/out操作，将更多的内存操作于物理内存上面。
</p>
</div>

</div>

<div id="outline-container-1-1-15" class="outline-4">
<h4 id="sec-1-1-15"><span class="section-number-4">1.1.15</span> /proc/sys/vm/dirty_*</h4>
<div class="outline-text-4" id="text-1-1-15">

<p>这几个参数主要是用来控制脏页刷回磁盘策略。关于脏页刷回磁盘的过程可以参看"文件IO/write"一节。
</p>
</div>

</div>

<div id="outline-container-1-1-16" class="outline-4">
<h4 id="sec-1-1-16"><span class="section-number-4">1.1.16</span> /proc/cpuinfo</h4>
<div class="outline-text-4" id="text-1-1-16">

</div>

</div>

<div id="outline-container-1-1-17" class="outline-4">
<h4 id="sec-1-1-17"><span class="section-number-4">1.1.17</span> /proc/crypto</h4>
<div class="outline-text-4" id="text-1-1-17">

<p>系统上已安装的内核使用的密码算法及每个算法的详细信息列表
</p>


<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/crypto 
name         : cbc(aes)
driver       : cbc(aes-generic)
module       : kernel
priority     : 100
refcnt       : 1
selftest     : passed
type         : blkcipher
blocksize    : 16
min keysize  : 16
max keysize  : 32
ivsize       : 16
geniv        : &lt;default&gt;

name         : hmac(sha256)
driver       : hmac(sha256-generic)
module       : kernel
priority     : 0
refcnt       : 2
selftest     : passed
type         : shash
blocksize    : 64
digestsize   : 32

name         : hmac(sha1)
driver       : hmac(sha1-generic)
module       : kernel
priority     : 0
refcnt       : 2
selftest     : passed
type         : shash
blocksize    : 64
digestsize   : 20

name         : stdrng
driver       : krng
module       : kernel
priority     : 200
refcnt       : 1
selftest     : passed
type         : rng
seedsize     : 0

name         : crc32c
driver       : crc32c-generic
module       : kernel
priority     : 100
refcnt       : 1
selftest     : passed
type         : shash
blocksize    : 1
digestsize   : 4

name         : aes
driver       : aes-generic
module       : kernel
priority     : 100
refcnt       : 1
selftest     : passed
type         : cipher
blocksize    : 16
min keysize  : 16
max keysize  : 32

name         : sha256
driver       : sha256-generic
module       : kernel
priority     : 0
refcnt       : 3
selftest     : passed
type         : shash
blocksize    : 64
digestsize   : 32

name         : sha224
driver       : sha224-generic
module       : kernel
priority     : 0
refcnt       : 1
selftest     : passed
type         : shash
blocksize    : 64
digestsize   : 28

name         : sha1
driver       : sha1-generic
module       : kernel
priority     : 0
refcnt       : 3
selftest     : passed
type         : shash
blocksize    : 64
digestsize   : 20

name         : md5
driver       : md5-generic
module       : kernel
priority     : 0
refcnt       : 1
selftest     : passed
type         : shash
blocksize    : 64
digestsize   : 16

name         : crc32c
driver       : crc32c-intel
module       : kernel
priority     : 200
refcnt       : 1
selftest     : passed
type         : shash
blocksize    : 1
digestsize   : 4
</pre>


</div>

</div>

<div id="outline-container-1-1-18" class="outline-4">
<h4 id="sec-1-1-18"><span class="section-number-4">1.1.18</span> /proc/loadavg</h4>
<div class="outline-text-4" id="text-1-1-18">

<p>保存关于CPU和磁盘I/O的负载平均值，其前三列分别表示每1秒钟、每5秒钟及每15秒的负载平均值，类似于uptime命令输出的相关信息；第四列是由斜线隔开的两个数值，前者表示当前正由内核调度的实体（进程和线程）的数目，后者表示系统当前存活的内核调度实体的数目；第五列表示此文件被查看前最近一个由内核创建的进程的PID.
</p>


<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/loadavg 
2.46 2.14 2.16 15/736 11012
</pre>


</div>

</div>

<div id="outline-container-1-1-19" class="outline-4">
<h4 id="sec-1-1-19"><span class="section-number-4">1.1.19</span> /proc/locks</h4>
<div class="outline-text-4" id="text-1-1-19">

<p>保存当前由内核锁定的文件的相关信息，包含内核内部的调试数据；每个锁定占据一行，且具有一个惟一的编号；如下输出信息中每行的第二列表示当前锁定使用的锁定类别，POSIX表示目前较新类型的文件锁，由lockf系统调用产生，FLOCK是传统的UNIX文件锁，由flock系统调用产生；第三列也通常由两种类型，ADVISORY表示不允许其他用户锁定此文件，但允许读取，MANDATORY表示此文件锁定期间不允许其他用户任何形式的访问；
</p>



<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/locks 
1: POSIX  ADVISORY  WRITE 18536 08:01:1573063 0 9223372036854775806
2: POSIX  ADVISORY  WRITE 3187 08:03:1970738 0 0
3: POSIX  ADVISORY  WRITE 3187 08:03:1971423 0 0
4: POSIX  ADVISORY  WRITE 3187 08:03:1971422 0 0
5: POSIX  ADVISORY  WRITE 3187 08:03:1971421 0 0
6: POSIX  ADVISORY  READ  647 08:01:3702340 1073741826 1073742335
7: FLOCK  ADVISORY  WRITE 28279 08:01:394731 0 EOF
8: POSIX  ADVISORY  WRITE 25505 08:03:1442453 1073741824 1073742335
9: POSIX  ADVISORY  READ  25505 08:03:1442317 128 128
10: POSIX  ADVISORY  READ  25505 08:03:1443015 1073741826 1073742335
11: POSIX  ADVISORY  READ  25505 08:03:1441997 128 128
12: POSIX  ADVISORY  READ  25505 08:03:1443023 1073741826 1073742335
13: POSIX  ADVISORY  READ  25505 08:03:1443008 1073741826 1073742335
14: POSIX  ADVISORY  WRITE 25505 08:03:1443000 0 EOF
15: POSIX  ADVISORY  WRITE 18249 08:03:1971018 0 9223372036854775806
16: POSIX  ADVISORY  WRITE 17989 08:03:1970815 0 9223372036854775806
17: POSIX  ADVISORY  WRITE 4378 08:03:2492158 1073741824 1073742335
18: POSIX  ADVISORY  READ  4378 08:03:2491544 1073741826 1073742335
19: POSIX  ADVISORY  READ  4378 08:03:2492160 128 128
20: POSIX  ADVISORY  READ  4378 08:03:2491555 1073741826 1073742335
21: POSIX  ADVISORY  READ  4378 08:03:2491887 128 128
22: POSIX  ADVISORY  READ  4378 08:03:2491558 1073741826 1073742335
23: POSIX  ADVISORY  WRITE 4378 08:03:2491537 0 EOF
24: POSIX  ADVISORY  READ  1945 08:03:1179790 124 124
25: POSIX  ADVISORY  WRITE 1953 08:03:1179792 0 0
26: POSIX  ADVISORY  READ  1951 08:03:1179790 128 128
27: POSIX  ADVISORY  READ  1951 08:03:1179788 1073741826 1073742335
28: POSIX  ADVISORY  READ  1945 08:03:1179790 128 128
29: POSIX  ADVISORY  READ  1945 08:03:1179788 1073741826 1073742335
30: POSIX  ADVISORY  WRITE 997 00:0f:1714 0 EOF
31: FLOCK  ADVISORY  WRITE 958 00:0f:8496 0 EOF
</pre>


</div>

</div>

<div id="outline-container-1-1-20" class="outline-4">
<h4 id="sec-1-1-20"><span class="section-number-4">1.1.20</span> /proc/slabinfo</h4>
<div class="outline-text-4" id="text-1-1-20">

<p>在内核中频繁使用的对象（如inode、dentry等）都有自己的cache，即slab pool，而/proc/slabinfo文件列出了这些对象相关slap的信息；详情可以参见内核文档中slapinfo的手册页；
</p>



<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; sudo cat /proc/slabinfo                                                                                    
[sudo] password for dirlt: 
slabinfo - version: 2.1
# name            &lt;active_objs&gt; &lt;num_objs&gt; &lt;objsize&gt; &lt;objperslab&gt; &lt;pagesperslab&gt; : tunables &lt;limit&gt; &lt;batchcount&gt; &lt;sharedfactor&gt; : sla
bdata &lt;active_slabs&gt; &lt;num_slabs&gt; &lt;sharedavail&gt;                                                                                      
ip6_dst_cache        100    100    320   25    2 : tunables    0    0    0 : slabdata      4      4      0
UDPLITEv6              0      0   1024   16    4 : tunables    0    0    0 : slabdata      0      0      0
UDPv6                 64     64   1024   16    4 : tunables    0    0    0 : slabdata      4      4      0
tw_sock_TCPv6        425    450    320   25    2 : tunables    0    0    0 : slabdata     18     18      0
TCPv6                221    221   1920   17    8 : tunables    0    0    0 : slabdata     13     13      0
flow_cache             0      0    104   39    1 : tunables    0    0    0 : slabdata      0      0      0
kcopyd_job             0      0   3240   10    8 : tunables    0    0    0 : slabdata      0      0      0
dm_uevent              0      0   2608   12    8 : tunables    0    0    0 : slabdata      0      0      0
dm_rq_target_io        0      0    408   20    2 : tunables    0    0    0 : slabdata      0      0      0
cfq_queue            510    510    232   17    1 : tunables    0    0    0 : slabdata     30     30      0
bsg_cmd                0      0    312   26    2 : tunables    0    0    0 : slabdata      0      0      0
mqueue_inode_cache     18     18    896   18    4 : tunables    0    0    0 : slabdata      1      1      0
fuse_request         104    104    608   26    4 : tunables    0    0    0 : slabdata      4      4      0
fuse_inode            46     46    704   23    4 : tunables    0    0    0 : slabdata      2      2      0
ecryptfs_key_record_cache      0      0    576   28    4 : tunables    0    0    0 : slabdata      0      0      0
ecryptfs_inode_cache      0      0    960   17    4 : tunables    0    0    0 : slabdata      0      0      0
hugetlbfs_inode_cache     28     28    576   28    4 : tunables    0    0    0 : slabdata      1      1      0
journal_handle       680    680     24  170    1 : tunables    0    0    0 : slabdata      4      4      0
journal_head         720    720    112   36    1 : tunables    0    0    0 : slabdata     20     20      0
revoke_record       4992   4992     32  128    1 : tunables    0    0    0 : slabdata     39     39      0
ext4_inode_cache   53478  53478    880   18    4 : tunables    0    0    0 : slabdata   2971   2971      0
ext4_free_data      3650   4015     56   73    1 : tunables    0    0    0 : slabdata     55     55      0
ext4_allocation_context   3810   3810    136   30    1 : tunables    0    0    0 : slabdata    127    127      0
ext4_io_end          261    406   1128   29    8 : tunables    0    0    0 : slabdata     14     14      0
ext4_io_page        1284   2816     16  256    1 : tunables    0    0    0 : slabdata     11     11      0
ext3_inode_cache       0      0    776   21    4 : tunables    0    0    0 : slabdata      0      0      0
ext3_xattr             0      0     88   46    1 : tunables    0    0    0 : slabdata      0      0      0
dquot                  0      0    256   16    1 : tunables    0    0    0 : slabdata      0      0      0
dnotify_mark        4230   4230    136   30    1 : tunables    0    0    0 : slabdata    141    141      0
dio                  100    100    640   25    4 : tunables    0    0    0 : slabdata      4      4      0
pid_namespace          0      0   2128   15    8 : tunables    0    0    0 : slabdata      0      0      0
user_namespace         0      0   1072   30    8 : tunables    0    0    0 : slabdata      0      0      0
UDP-Lite               0      0    832   19    4 : tunables    0    0    0 : slabdata      0      0      0
ip_fib_trie          292    292     56   73    1 : tunables    0    0    0 : slabdata      4      4      0
arp_cache             72     72    448   18    2 : tunables    0    0    0 : slabdata      4      4      0
UDP                   76     76    832   19    4 : tunables    0    0    0 : slabdata      4      4      0
tw_sock_TCP          240    240    256   16    1 : tunables    0    0    0 : slabdata     15     15      0
TCP                  140    252   1728   18    8 : tunables    0    0    0 : slabdata     14     14      0
blkdev_queue          51     51   1880   17    8 : tunables    0    0    0 : slabdata      3      3      0
blkdev_requests      374    374    368   22    2 : tunables    0    0    0 : slabdata     17     17      0
fsnotify_event      1632   1632    120   34    1 : tunables    0    0    0 : slabdata     48     48      0
bip-256                7      7   4224    7    8 : tunables    0    0    0 : slabdata      1      1      0
bip-128                0      0   2176   15    8 : tunables    0    0    0 : slabdata      0      0      0
bip-64                 0      0   1152   28    8 : tunables    0    0    0 : slabdata      0      0      0
bip-16                21     21    384   21    2 : tunables    0    0    0 : slabdata      1      1      0
sock_inode_cache    1149   1300    640   25    4 : tunables    0    0    0 : slabdata     52     52      0
net_namespace          0      0   2560   12    8 : tunables    0    0    0 : slabdata      0      0      0
shmem_inode_cache   2929   3375    640   25    4 : tunables    0    0    0 : slabdata    135    135      0
Acpi-ParseExt       3304   3304     72   56    1 : tunables    0    0    0 : slabdata     59     59      0
Acpi-State           204    204     80   51    1 : tunables    0    0    0 : slabdata      4      4      0
Acpi-Namespace      1428   1428     40  102    1 : tunables    0    0    0 : slabdata     14     14      0
task_delay_info     1764   1764    112   36    1 : tunables    0    0    0 : slabdata     49     49      0
taskstats             96     96    328   24    2 : tunables    0    0    0 : slabdata      4      4      0
proc_inode_cache    3001   3302    624   26    4 : tunables    0    0    0 : slabdata    127    127      0
sigqueue             150    150    160   25    1 : tunables    0    0    0 : slabdata      6      6      0
bdev_cache            76     76    832   19    4 : tunables    0    0    0 : slabdata      4      4      0
sysfs_dir_cache    18480  18480    144   28    1 : tunables    0    0    0 : slabdata    660    660      0
inode_cache         7515   8120    560   29    4 : tunables    0    0    0 : slabdata    280    280      0
dentry             63000  63000    192   21    1 : tunables    0    0    0 : slabdata   3000   3000      0
iint_cache             0      0    112   36    1 : tunables    0    0    0 : slabdata      0      0      0
buffer_head        54221  60684    104   39    1 : tunables    0    0    0 : slabdata   1556   1556      0
vm_area_struct     44863  48047    176   23    1 : tunables    0    0    0 : slabdata   2089   2089      0
mm_struct            252    252    896   18    4 : tunables    0    0    0 : slabdata     14     14      0
files_cache          465    506    704   23    4 : tunables    0    0    0 : slabdata     22     22      0
signal_cache         456    600   1088   30    8 : tunables    0    0    0 : slabdata     20     20      0
sighand_cache        285    315   2112   15    8 : tunables    0    0    0 : slabdata     21     21      0
task_xstate         1631   1824    832   19    4 : tunables    0    0    0 : slabdata     96     96      0
task_struct          758    820   5872    5    8 : tunables    0    0    0 : slabdata    164    164      0
anon_vma           12228  13328     72   56    1 : tunables    0    0    0 : slabdata    238    238      0
shared_policy_node  39239  42670     48   85    1 : tunables    0    0    0 : slabdata    502    502      0
numa_policy          680    680     24  170    1 : tunables    0    0    0 : slabdata      4      4      0
radix_tree_node    11597  15792    568   28    4 : tunables    0    0    0 : slabdata    564    564      0
idr_layer_cache     1320   1320    544   30    4 : tunables    0    0    0 : slabdata     44     44      0
dma-kmalloc-8192       0      0   8192    4    8 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-4096       0      0   4096    8    8 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-2048       0      0   2048   16    8 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-1024       0      0   1024   16    4 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-512        0      0    512   16    2 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-256        0      0    256   16    1 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-128        0      0    128   32    1 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-64         0      0     64   64    1 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-32         0      0     32  128    1 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-16         0      0     16  256    1 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-8          0      0      8  512    1 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-192        0      0    192   21    1 : tunables    0    0    0 : slabdata      0      0      0
dma-kmalloc-96         0      0     96   42    1 : tunables    0    0    0 : slabdata      0      0      0
kmalloc-8192          87     92   8192    4    8 : tunables    0    0    0 : slabdata     23     23      0
kmalloc-4096         200    240   4096    8    8 : tunables    0    0    0 : slabdata     30     30      0
kmalloc-2048         422    544   2048   16    8 : tunables    0    0    0 : slabdata     34     34      0
kmalloc-1024        1154   1280   1024   16    4 : tunables    0    0    0 : slabdata     80     80      0
kmalloc-512         2848   3328    512   16    2 : tunables    0    0    0 : slabdata    208    208      0
kmalloc-256        14079  14704    256   16    1 : tunables    0    0    0 : slabdata    919    919      0
kmalloc-128         3467   6816    128   32    1 : tunables    0    0    0 : slabdata    213    213      0
kmalloc-64         10415  12928     64   64    1 : tunables    0    0    0 : slabdata    202    202      0
kmalloc-32         10224  11648     32  128    1 : tunables    0    0    0 : slabdata     91     91      0
kmalloc-16          4608   4608     16  256    1 : tunables    0    0    0 : slabdata     18     18      0
kmalloc-8          31744  31744      8  512    1 : tunables    0    0    0 : slabdata     62     62      0
kmalloc-192         3055   4368    192   21    1 : tunables    0    0    0 : slabdata    208    208      0
kmalloc-96          4031   4116     96   42    1 : tunables    0    0    0 : slabdata     98     98      0
kmem_cache            32     32    256   16    1 : tunables    0    0    0 : slabdata      2      2      0
kmem_cache_node      128    128     64   64    1 : tunables    0    0    0 : slabdata      2      2      0
</pre>


</div>

</div>

<div id="outline-container-1-1-21" class="outline-4">
<h4 id="sec-1-1-21"><span class="section-number-4">1.1.21</span> /proc/vmstat</h4>
<div class="outline-text-4" id="text-1-1-21">

<p>当前系统虚拟内存的多种统计数据，信息量可能会比较大，这因系统而有所不同，可读性较好；
</p>



<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/vmstat 
nr_free_pages 39606
nr_inactive_anon 207905
nr_active_anon 575539
nr_inactive_file 51308
nr_active_file 51193
nr_unevictable 8
nr_mlock 8
nr_anon_pages 662833
nr_mapped 30562
nr_file_pages 242500
nr_dirty 288
nr_writeback 0
nr_slab_reclaimable 20951
nr_slab_unreclaimable 10401
nr_page_table_pages 12576
nr_kernel_stack 739
nr_unstable 0
nr_bounce 0
nr_vmscan_write 1043356
nr_vmscan_immediate_reclaim 310904
nr_writeback_temp 0
nr_isolated_anon 0
nr_isolated_file 0
nr_shmem 106998
nr_dirtied 14956613
nr_written 13377394
numa_hit 6181305909
numa_miss 0
numa_foreign 0
numa_interleave 5518
numa_local 6181305909
numa_other 0
nr_anon_transparent_hugepages 0
nr_dirty_threshold 92555
nr_dirty_background_threshold 46277
pgpgin 17601663
pgpgout 64310804
pswpin 491621
pswpout 789986
pgalloc_dma 0
pgalloc_dma32 5030620457
pgalloc_normal 1192146375
pgalloc_movable 0
pgfree 6222807408
pgactivate 4825471
pgdeactivate 4561700
pgfault 5884815503
pgmajfault 159176
pgrefill_dma 0
pgrefill_dma32 2727143
pgrefill_normal 3119709
pgrefill_movable 0
pgsteal_dma 0
pgsteal_dma32 4612169
pgsteal_normal 2661815
pgsteal_movable 0
pgscan_kswapd_dma 0
pgscan_kswapd_dma32 6468262
pgscan_kswapd_normal 4573712
pgscan_kswapd_movable 0
pgscan_direct_dma 0
pgscan_direct_dma32 275766
pgscan_direct_normal 246885
pgscan_direct_movable 0
zone_reclaim_failed 0
pginodesteal 0
slabs_scanned 1904768
kswapd_steal 7105516
kswapd_inodesteal 41781
kswapd_low_wmark_hit_quickly 10
kswapd_high_wmark_hit_quickly 980
kswapd_skip_congestion_wait 4130
pageoutrun 147240
allocstall 3159
pgrotated 884823
compact_blocks_moved 0
compact_pages_moved 0
compact_pagemigrate_failed 0
compact_stall 5
compact_fail 3
compact_success 2
htlb_buddy_alloc_success 0
htlb_buddy_alloc_fail 0
unevictable_pgs_culled 0
unevictable_pgs_scanned 0
unevictable_pgs_rescued 74
unevictable_pgs_mlocked 82
unevictable_pgs_munlocked 74
unevictable_pgs_cleared 0
unevictable_pgs_stranded 0
unevictable_pgs_mlockfreed 0
thp_fault_alloc 0
thp_fault_fallback 0
thp_collapse_alloc 0
thp_collapse_alloc_failed 0
thp_split 0
</pre>


</div>

</div>

<div id="outline-container-1-1-22" class="outline-4">
<h4 id="sec-1-1-22"><span class="section-number-4">1.1.22</span> /proc/zoneinfo</h4>
<div class="outline-text-4" id="text-1-1-22">

<p>内存区域（zone）的详细信息列表
</p>



<pre class="example">[dirlt@umeng-ubuntu-pc] &gt; cat /proc/zoneinfo 
Node 0, zone      DMA
  pages free     3977
        min      65
        low      81
        high     97
        scanned  0
        spanned  4080
        present  3913
    nr_free_pages 3977
    nr_inactive_anon 0
    nr_active_anon 0
    nr_inactive_file 0
    nr_active_file 0
    nr_unevictable 0
    nr_mlock     0
    nr_anon_pages 0
    nr_mapped    0
    nr_file_pages 0
    nr_dirty     0
    nr_writeback 0
    nr_slab_reclaimable 0
    nr_slab_unreclaimable 0
    nr_page_table_pages 0
    nr_kernel_stack 0
    nr_unstable  0
    nr_bounce    0
    nr_vmscan_write 0
    nr_vmscan_immediate_reclaim 0
    nr_writeback_temp 0
    nr_isolated_anon 0
    nr_isolated_file 0
    nr_shmem     0
    nr_dirtied   0
    nr_written   0
    numa_hit     0
    numa_miss    0
    numa_foreign 0
    numa_interleave 0
    numa_local   0
    numa_other   0
    nr_anon_transparent_hugepages 0
        protection: (0, 2906, 3912, 3912)
  pagesets
    cpu: 0
              count: 0
              high:  0
              batch: 1
  vm stats threshold: 6
    cpu: 1
              count: 0
              high:  0
              batch: 1
  vm stats threshold: 6
    cpu: 2
              count: 0
              high:  0
              batch: 1
  vm stats threshold: 6
    cpu: 3
              count: 0
              high:  0
              batch: 1
  vm stats threshold: 6
  all_unreclaimable: 1
  start_pfn:         16
  inactive_ratio:    1
Node 0, zone    DMA32
  pages free     36397
        min      12503
        low      15628
        high     18754
        scanned  0
        spanned  1044480
        present  744178
    nr_free_pages 36397
    nr_inactive_anon 122972
    nr_active_anon 492944
    nr_inactive_file 32614
    nr_active_file 31141
    nr_unevictable 0
    nr_mlock     0
    nr_anon_pages 528611
    nr_mapped    16731
    nr_file_pages 167055
    nr_dirty     202
    nr_writeback 0
    nr_slab_reclaimable 14391
    nr_slab_unreclaimable 3764
    nr_page_table_pages 5393
    nr_kernel_stack 217
    nr_unstable  0
    nr_bounce    0
    nr_vmscan_write 573794
    nr_vmscan_immediate_reclaim 248788
    nr_writeback_temp 0
    nr_isolated_anon 0
    nr_isolated_file 0
    nr_shmem     74754
    nr_dirtied   8249855
    nr_written   6854644
    numa_hit     5001386683
    numa_miss    0
    numa_foreign 0
    numa_interleave 0
    numa_local   5001386683
    numa_other   0
    nr_anon_transparent_hugepages 0
        protection: (0, 0, 1006, 1006)
  pagesets
    cpu: 0
              count: 62
              high:  186
              batch: 31
  vm stats threshold: 36
    cpu: 1
              count: 171
              high:  186
              batch: 31
  vm stats threshold: 36
    cpu: 2
              count: 62
              high:  186
              batch: 31
  vm stats threshold: 36
    cpu: 3
              count: 125
              high:  186
              batch: 31
  vm stats threshold: 36
  all_unreclaimable: 0
  start_pfn:         4096
  inactive_ratio:    4
Node 0, zone   Normal
  pages free     5426
        min      4327
        low      5408
        high     6490
        scanned  0
        spanned  261632
        present  257544
    nr_free_pages 5426
    nr_inactive_anon 81011
    nr_active_anon 80301
    nr_inactive_file 18852
    nr_active_file 20072
    nr_unevictable 8
    nr_mlock     8
    nr_anon_pages 131848
    nr_mapped    13831
    nr_file_pages 71702
    nr_dirty     172
    nr_writeback 0
    nr_slab_reclaimable 6568
    nr_slab_unreclaimable 6641
    nr_page_table_pages 7176
    nr_kernel_stack 523
    nr_unstable  0
    nr_bounce    0
    nr_vmscan_write 469562
    nr_vmscan_immediate_reclaim 62116
    nr_writeback_temp 0
    nr_isolated_anon 0
    nr_isolated_file 0
    nr_shmem     28316
    nr_dirtied   6708910
    nr_written   6523845
    numa_hit     1183081020
    numa_miss    0
    numa_foreign 0
    numa_interleave 5518
    numa_local   1183081020
    numa_other   0
    nr_anon_transparent_hugepages 0
        protection: (0, 0, 0, 0)
  pagesets
    cpu: 0
              count: 41
              high:  186
              batch: 31
  vm stats threshold: 24
    cpu: 1
              count: 170
              high:  186
              batch: 31
  vm stats threshold: 24
    cpu: 2
              count: 132
              high:  186
              batch: 31
  vm stats threshold: 24
    cpu: 3
              count: 185
              high:  186
              batch: 31
  vm stats threshold: 24
  all_unreclaimable: 0
  start_pfn:         1048576
  inactive_ratio:    1
</pre>


</div>
</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> vmlinuz</h3>
<div class="outline-text-3" id="text-1-2">

<p>vmlinuz是可引导的、压缩的内核。“vm”代表“Virtual Memory”。Linux 支持虚拟内存，不像老的操作系统比如DOS有640KB内存的限制。Linux能够使用硬盘空间作为虚拟内存，因此得名“vm”。vmlinuz是可执行的Linux内核，它位于/boot/vmlinuz，它一般是一个软链接。vmlinux是未压缩的内核，vmlinuz是vmlinux的压缩文件。
</p>
<p>
vmlinuz的建立有两种方式。一是编译内核时通过“make zImage”创建，然后通过：“cp /usr/src/linux-2.4/arch/i386/linux/boot/zImage /boot/vmlinuz”产生。zImage适用于小内核的情况，它的存在是为了向后的兼容性。二是内核编译时通过命令make bzImage创建，然后通过：“cp /usr/src/linux-2.4/arch/i386/linux/boot/bzImage /boot/vmlinuz”产生。bzImage是压缩的内核映像，需要注意，bzImage不是用bzip2压缩的，bzImage中的bz容易引起误解，bz表示“big zImage”。 bzImage中的b是“big”意思。
</p>
<p>
zImage(vmlinuz)和bzImage(vmlinuz)都是用gzip压缩的。它们不仅是一个压缩文件，而且在这两个文件的开头部分内嵌有gzip解压缩代码。所以你不能用gunzip 或 gzip –dc解包vmlinuz。内核文件中包含一个微型的gzip用于解压缩内核并引导它。两者的不同之处在于，老的zImage解压缩内核到低端内存(第一个640K)，bzImage解压缩内核到高端内存(1M以上)。如果内核比较小，那么可以采用zImage 或bzImage之一，两种方式引导的系统运行时是相同的。大的内核采用bzImage，不能采用zImage。
</p>
</div>

</div>

<div id="outline-container-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> 系统工具</h3>
<div class="outline-text-3" id="text-1-3">


</div>

<div id="outline-container-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> mpstat</h4>
<div class="outline-text-4" id="text-1-3-1">

<p>mpstat - Report processors related statistics.
</p>



<pre class="example">mpstat -P [cpu|ALL] -V internal count
</pre>

<ul>
<li>-P 能够选择特定的CPU来察看,或者是察看所有的CPU
</li>
<li>internal 表示多少秒显示一次
</li>
<li>count 表示显示多少次
</li>
</ul>

<p>通常使用就是"mpstat -P ALL 1"
</p>


<pre class="example">[zhangyan@tc-cm-et18.tc.baidu.com]$ mpstat -P ALL 1
Linux 2.6.9_5-10-0-1 (tc-cm-et18.tc.baidu.com)  2011年09月20日

08时39分58秒  CPU   %user   %nice %system %iowait    %irq   %soft   %idle    intr/s
08时39分59秒  all   37.55    0.00    0.00    0.00    0.00    0.00   62.45   1009.00
08时39分59秒    0    0.00    0.00    0.00    0.00    0.00    0.00  100.00   1002.00
08时39分59秒    1  100.00    0.00    0.00    0.00    0.00    0.00    0.00      0.00
08时39分59秒    2    0.00    0.00    0.00    0.00    0.00    0.00  100.00      7.00
08时39分59秒    3  100.00    0.00    0.00    0.00    0.00    0.00    0.00      0.00
08时39分59秒    4  100.00    0.00    0.00    0.00    0.00    0.00    0.00      0.00
08时39分59秒    5    0.00    0.00    0.00    0.00    0.00    0.00  100.00      0.00
08时39分59秒    6    0.00    0.00    0.00    0.00    0.00    0.00   99.00      0.00
08时39分59秒    7    0.00    0.00    0.00    0.00    0.00    0.00  100.00      0.00
</pre>


<p>
其中每个字段的意思分别是：
</p><ul>
<li>CPU 处理器编号
</li>
<li>%user 处理user状态占用率
</li>
<li>%nice 处理user状态并且是nice priority占用率
</li>
<li>%system 处理system状态占用率(不包括硬中断和软中断)
</li>
<li>%iowait 在进行io操作时候有cpu idle时间比率
</li>
<li>%irq CPU耗费在硬中断上时间比率
</li>
<li>%soft CPU耗费在软中断上时间比率(软中断可以被任何一个CPU处理)
</li>
<li>%idle 在没有io操作时候的cpu idle时间比率
</li>
<li>intr/s 每秒CPU中断次数(包括硬中断和软终端)
</li>
</ul>


</div>

</div>

<div id="outline-container-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> vmstat</h4>
<div class="outline-text-4" id="text-1-3-2">





<pre class="example">vmstat [-a] [-n] [-S unit] [delay [ count]] // 查看全局内存开销
vmstat [-f] // 查看自从boot依赖forks的次数(fork,vfork,clone)，可以认为就是创建的task数目(包括线程)
vmstat [-s] // 系统事件统计次数以及内存统计
vmstat [-d] // 磁盘使用统计数据
vmstat [-m] // 内核开辟对象slabinfo
</pre>



<pre class="example">[dirlt@localhost.localdomain]$ vmstat 1
procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0      4  45752  33460  99324    0    0     1     1    1    9  0  0 99  0  0
 0  0      4  45752  33460  99324    0    0     0     0    1    8  0  0 100  0  0
</pre>

<ul>
<li>r 多少个进程正在等待运行
</li>
<li>b 多少个进程block住了
</li>
<li>swpd 虚拟内存(swap)
</li>
<li>free 空闲内存
</li>
<li>buff 缓冲内存(buffers,用户缓存文件inode)
</li>
<li>cache 缓冲内存(cache,用户作为文件系统page-cache)
</li>
<li>前面三个参数相加才是可用内存大小
</li>
<li>si 读取disk使用的虚拟内存
</li>
<li>so 写disk使用的虚拟内存
</li>
<li>bi[block in] 块设备读取速率,blocks/s
</li>
<li>bo[block out] 块设备写速度,blocks/s
</li>
<li>in[interrupt] 每秒中断个数
</li>
<li>cs[context switch] 每秒上下文切换次数
</li>
<li>us 用户态时间[user]
</li>
<li>sy 系统时间[system]
</li>
<li>id 空闲时间[idle]
</li>
<li>wa 等待io时间[wait IO]
</li>
<li>st 虚拟机使用时间[stolen from VM]
</li>
</ul>





<pre class="example">[zhangyan04@tc-hpc-dev.tc.baidu.com]$ vmstat -d
disk- ------------reads------------ ------------writes----------- -----IO------
       total merged sectors      ms  total merged sectors      ms    cur    sec
sda    13873   1504  633974   37617 1366407 89873356 108823150 37820617      0    323
sda1      46     88    1072      34      0      0       0       0      0      0
sda2   10274    242  595386   24867  34050  35092 2474128 1078425      0    239
sda3    3515   1125   36820   12653 1332349 89838264 106349006 36742192      0    292
</pre>

<ul>
<li>total 总共发起读写次数
</li>
<li>merged 聚合读写次数
</li>
<li>sectors 读写多少扇区
</li>
<li>ms 耗时毫秒
</li>
<li>cur 当前是否存在IO操作
</li>
<li>sec 耗费在IO的时间(秒)
</li>
</ul>





<pre class="example">[zhangyan04@tc-hpc-dev.tc.baidu.com]$ vmstat -m
Cache                       Num  Total   Size  Pages
nfs_direct_cache              0      0    168     24
nfs_write_data               69     69    704     23
</pre>

<ul>
<li>Num 当前多少个对象正在被使用
</li>
<li>Total 总共有多少个对象可以被使用
</li>
<li>Size 每个对象大小
</li>
<li>Pages 占用了多少个Page(这个Page上面至少包含一个正在被使用的对象)
</li>
</ul>





<pre class="example">[zhangyan04@tc-hpc-dev.tc.baidu.com]$ vmstat -s
      8191996  total memory
      4519256  used memory
      1760044  active memory
      2327204  inactive memory
      3672740  free memory
        76200  buffer memory
      3935788  swap cache
      1020088  total swap
            0  used swap
      1020088  free swap
       423476 non-nice user cpu ticks
           91 nice user cpu ticks
       295803 system cpu ticks
     70621941 idle cpu ticks
        39354 IO-wait cpu ticks
          800 IRQ cpu ticks
        52009 softirq cpu ticks
       317179 pages paged in
     54413375 pages paged out
            0 pages swapped in
            0 pages swapped out
    754373489 interrupts
    500998741 CPU context switches
   1323083318 boot time
       418742 forks
</pre>


</div>

</div>

<div id="outline-container-1-3-3" class="outline-4">
<h4 id="sec-1-3-3"><span class="section-number-4">1.3.3</span> free</h4>
<div class="outline-text-4" id="text-1-3-3">




<pre class="example">[zhangyan04@tc-hpc-dev.tc.baidu.com]$ free -t
             total       used       free     shared    buffers     cached
Mem:       8191996    4519868    3672128          0      76204    3935864
-/+ buffers/cache:     507800    7684196
Swap:      1020088          0    1020088
Total:     9212084    4519868    4692216
</pre>

<ul>
<li>total 总内存大小[实际内存大小]
</li>
<li>used 已经使用大小[buffers+shared+cached+应用程序使用]
</li>
<li>free 未使用大小
</li>
<li>shared 共享内存大小
</li>
<li>buffers 缓存大小包括目录inode
</li>
<li>cached 用于操作文件使用缓冲[所谓cached的内容还是可以被使用的]
</li>
<li>- buffers/cache 表示used-buffers/cached的大小，就是应用程序已经使用内存大小
</li>
<li>+ buffers/cache 表示free+buffers/cached的大小，就是所有可供应用程序使用的大小
</li>
<li>Swap:total 交换分区大小
</li>
<li>Swap:used 交换分区使用大小
</li>
<li>Swap:free 可以使用的分区大小
</li>
</ul>


</div>

</div>

<div id="outline-container-1-3-4" class="outline-4">
<h4 id="sec-1-3-4"><span class="section-number-4">1.3.4</span> dmesg</h4>
<div class="outline-text-4" id="text-1-3-4">

<p>能够察看开机时启动信息(启动信息保存在/var/log/dmesg文件里)
</p>


<pre class="example">[dirlt@localhost.localdomain]$ dmesg | less
Linux version 2.6.23.1-42.fc8 (kojibuilder@xenbuilder4.fedora.phx.redhat.com) (gcc version 4.1.2 20070925 (Red Hat 4.1.2-33)) #1 SMP Tue Oct 30 13:55:12 EDT 2007
BIOS-provided physical RAM map:
 BIOS-e820: 0000000000000000 - 000000000009f800 (usable)
 BIOS-e820: 000000000009f800 - 00000000000a0000 (reserved)
 BIOS-e820: 00000000000ca000 - 00000000000cc000 (reserved)
 BIOS-e820: 00000000000dc000 - 0000000000100000 (reserved)
 BIOS-e820: 0000000000100000 - 000000000fef0000 (usable)
 BIOS-e820: 000000000fef0000 - 000000000feff000 (ACPI data)
 BIOS-e820: 000000000feff000 - 000000000ff00000 (ACPI NVS)
 BIOS-e820: 000000000ff00000 - 0000000010000000 (usable)
 BIOS-e820: 00000000fec00000 - 00000000fec10000 (reserved)
 BIOS-e820: 00000000fee00000 - 00000000fee01000 (reserved)
 BIOS-e820: 00000000fffe0000 - 0000000100000000 (reserved)
</pre>


</div>

</div>

<div id="outline-container-1-3-5" class="outline-4">
<h4 id="sec-1-3-5"><span class="section-number-4">1.3.5</span> taskset</h4>
<div class="outline-text-4" id="text-1-3-5">

<p>可以用来获取和修改进程的CPU亲和性。
</p><ul>
<li>taskset -c 1,2,3 cmd (指定在CPU #1,#2,#3上运行cmd)
</li>
<li>taskset -cp 1,2,3 pid (指定在CPU #1,#2,#3上运行进程pid)
</li>
<li>taskset -c mask cmd|pid 通过mask格式进行设置，比如0x3就是#0和#1亲和性
</li>
</ul>

<p>如果不指定-c的话那么就是获取亲和性。程序上的话可以使用sched_setaffinity/sched_getaffinity调用来修改和获取某个进程和CPU的亲和性。
</p>



<pre class="example">taskset  is used to set or retrieve the CPU affinity of a running pro-
cess given its PID or to launch a new COMMAND with a given CPU  affin-
ity.  CPU affinity is a scheduler property that "bonds" a process to a
given set of CPUs on the system.  The Linux scheduler will  honor  the
given  CPU  affinity  and  the process will not run on any other CPUs.
Note that the Linux scheduler also supports natural CPU affinity:  the
scheduler  attempts to keep processes on the same CPU as long as prac-
tical for performance reasons.   Therefore,  forcing  a  specific  CPU
affinity is useful only in certain applications.
</pre>


</div>

</div>

<div id="outline-container-1-3-6" class="outline-4">
<h4 id="sec-1-3-6"><span class="section-number-4">1.3.6</span> lsof</h4>
<div class="outline-text-4" id="text-1-3-6">

<p>TODO(zhangyan04):
</p>
</div>

</div>

<div id="outline-container-1-3-7" class="outline-4">
<h4 id="sec-1-3-7"><span class="section-number-4">1.3.7</span> quota</h4>
<div class="outline-text-4" id="text-1-3-7">

<p><a href="http://blog.itpub.net/post/7184/488931">http://blog.itpub.net/post/7184/488931</a>
</p>
<p>
quota用来为用户编辑磁盘配额。
</p><ul>
<li>初始化磁盘配额功能
</li>
</ul>

<p>修改/etc/fstab增加usrquota以及grpquota
</p>


<pre class="example">/dev/hdb1 /home/extra ext3 defaults,noatime,usrquota,grpquota 1 2
</pre>


<ul>
<li>建立磁盘配额文件
</li>
</ul>




<pre class="example"># cd /home/extra
# touch aquota.user
# touch aquota.group
# chmod 600 aquota.user
# chmod 600 aquota.group
</pre>


<ul>
<li>重新挂载磁盘。mount -o remount /home/extra
</li>
<li>扫描磁盘，初始化磁盘配额表。修改之前建立的aquota文件。/sbin/quotacheck -uvg /home/extra

</li>
<li>编辑用户磁盘配额
</li>
</ul>

<p>如果为用户设定可以使用/usr/sbin/edquota -u testuser,如果需要为群组设定的话/usr/sbin/edquota -g testgrp.
</p>


<pre class="example">Disk quotas for user testuser (uid 517):
Filesystem blocks soft hard inodes soft hard
/dev/hdb1 0 0 0 0 0 0
</pre>

<p>
各个字段含义如下：
</p><ul>
<li>blocks：已经使用的磁盘块(1k bytes)
</li>
<li>soft：软限额大小，如果用户超出了这个限额，系统会发出警告，如果在设定的时间内还没有回到该限额以下，系统将拒绝该用户使用额外的磁盘空间。
</li>
<li>hard：硬限额，用户不允许超出的磁盘限制
</li>
<li>inodes：用户已经使用的inodes数
</li>
<li>soft和hard含义同上，不过，这里是限制用户创建的文件/目录总数。
</li>
</ul>

<p>可以使用/usr/sbin/edquota -t来修改软限额期限。
</p>
<ul>
<li>启动磁盘配额可以使用/sbin/quotaon -av,关闭磁盘配额可以使用/sbin/quotaoff -av.
</li>
<li>查看整体磁盘配额可以使用/usr/sbin/repquota -a,查看用户配额情况可以使用quota -vu test
</li>
</ul>


<p>
可以对WWW空间，FTP空间，Email空间进行磁盘配额限制。Quota只能基于磁盘分区进行配额管理，不能基于目录进行配额管理，因此只能把数据存放在有配额限制的分区，再用符号链接到实际应用的目录。
</p></div>

</div>

<div id="outline-container-1-3-8" class="outline-4">
<h4 id="sec-1-3-8"><span class="section-number-4">1.3.8</span> crontab</h4>
<div class="outline-text-4" id="text-1-3-8">

<p>crontab就是为了能够使得工作自动化在特定的时间或者是时间间隔执行特定的程序。crontab -e就可以编辑crontab配置文件，默认是vim编辑器。crontab配置文件里面可以像shell一样定义变量，之后就是任务描述，每一个任务分为6个字段: minute hour day month week command
</p><ol>
<li>minute范围是0-59
</li>
<li>hour范围是0-23
</li>
<li>day范围是1-31
</li>
<li>month范围是1-12
</li>
<li>week范围是0-7[0/7表示Sun]
</li>
</ol>

<p>对于每个字段可以有3种表示方式
</p><ol>
<li>- 表示匹配所有时间
</li>
<li>num 表示完全匹配
</li>
<li>num1-num2 表示匹配范围
</li>
<li>num1,num2,num3&hellip; 进行枚举匹配
</li>
<li>num1-num2/interval 表示从num1-num2时间段内每interval间隔
</li>
</ol>

<p>对于系统级别的crontab配置文件在/etc/crontab貌似里面还多了一个用户字段.下面是几个配置的例子:
</p>


<pre class="example">0 6 * * * /home/dirlt/platform/apache/bin/apachectl restart 每天早上6点重启apache
0,30 18-23 * * * /home/dirlt/platform/apache/bin/apachectl restart 每天18-23时候每隔半小时重启apache
\* 23-7/1 * * * /* 23-7/1 * * * /usr/local/apache/bin/apachectl restart 每天从23到次日7点每隔一小时重启apache
</pre>


</div>

</div>

<div id="outline-container-1-3-9" class="outline-4">
<h4 id="sec-1-3-9"><span class="section-number-4">1.3.9</span> hdparm</h4>
<div class="outline-text-4" id="text-1-3-9">

<p>hdparm - get/set hard disk parameters
</p>
<p>
下面是使用的用法
</p>


<pre class="example">/sbin/hdparm [ flags ] [device] ..
</pre>


<p>
对于device的话可以通过mount来查看
</p>


<pre class="example">[dirlt@localhost.localdomain]$ mount
/dev/mapper/VolGroup00-LogVol00 on / type ext3 (rw)
proc on /proc type proc (rw)
sysfs on /sys type sysfs (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
/dev/sda1 on /boot type ext3 (rw)
tmpfs on /dev/shm type tmpfs (rw)
none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)
sunrpc on /var/lib/nfs/rpc_pipefs type rpc_pipefs (rw)
</pre>

<p>
我们关注自己读写目录，比如通常在/home下面，这里就是使用的device就是/dev/mapper/VolGroup00-LogVol00
</p>
<p>
TODO(dirlt):好多选项都不太清楚是什么意思.
</p></div>

</div>

<div id="outline-container-1-3-10" class="outline-4">
<h4 id="sec-1-3-10"><span class="section-number-4">1.3.10</span> nmon</h4>
<div class="outline-text-4" id="text-1-3-10">

<p><a href="http://nmon.sourceforge.net/pmwiki.php">http://nmon.sourceforge.net/pmwiki.php</a> Nigel's performance Monitor for Linux
</p>
<p>
TODO(dirlt):
</p>
</div>

</div>

<div id="outline-container-1-3-11" class="outline-4">
<h4 id="sec-1-3-11"><span class="section-number-4">1.3.11</span> pmap</h4>
<div class="outline-text-4" id="text-1-3-11">

<p>TODO(dirlt):
</p>
</div>

</div>

<div id="outline-container-1-3-12" class="outline-4">
<h4 id="sec-1-3-12"><span class="section-number-4">1.3.12</span> strace</h4>
<div class="outline-text-4" id="text-1-3-12">

<p>TODO(dirlt):
</p>
</div>

</div>

<div id="outline-container-1-3-13" class="outline-4">
<h4 id="sec-1-3-13"><span class="section-number-4">1.3.13</span> uptime</h4>
<div class="outline-text-4" id="text-1-3-13">

<p>TODO(dirlt):
</p>
</div>

</div>

<div id="outline-container-1-3-14" class="outline-4">
<h4 id="sec-1-3-14"><span class="section-number-4">1.3.14</span> top</h4>
<div class="outline-text-4" id="text-1-3-14">

<p>TODO(dirlt):
</p>
</div>

</div>

<div id="outline-container-1-3-15" class="outline-4">
<h4 id="sec-1-3-15"><span class="section-number-4">1.3.15</span> pmap</h4>
<div class="outline-text-4" id="text-1-3-15">

<p>TODO(dirlt)
</p>
</div>

</div>

<div id="outline-container-1-3-16" class="outline-4">
<h4 id="sec-1-3-16"><span class="section-number-4">1.3.16</span> iostat</h4>
<div class="outline-text-4" id="text-1-3-16">

<p>iostat主要用来观察io设备的负载情况的。首先我们看看iostat的样例输出
</p>


<pre class="example">dirlt@dirlt-virtual-machine:~$ iostat
Linux 3.2.0-23-generic (dirlt-virtual-machine)  2012年06月18日  _x86_64_        (1 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.91    0.05    4.05    5.08    0.00   89.91

Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn
scd0              0.01         0.04         0.00         48          0
sda              31.09       203.67      9862.91     260487   12614468
</pre>

<p>
第一行显示了CPU平均负载情况，然后给出的信息是自从上一次reboot起来今的iostat平均信息。如果我们使用iostat
采用interval输出的话，那么下一次的数值是相对于上一次的数值而言的。这里解释一下CPU的各个状态：
</p><ul>
<li>%user 用户态比率
</li>
<li>%nice 用户态使用nice priority比率
</li>
<li>%system 系统态比率
</li>
<li>%iowait CPU在等待IO操作时候idle比率
</li>
<li>%steal TODO(dirlt)
</li>
<li>%idle idle比率但是不包括在等待IO操作idle比率
</li>
</ul>


<p>
然后在来看看iostat的命令行参数
</p>


<pre class="example">iostat [ -c ] [ -d ] [ -h ] [ -N ] [ -k | -m ] [ -t ] [ -V ] [ -x ] [ -z ] [ device [...] | ALL  ]  [  -p  [
device [,...] | ALL ] ] [ interval [ count ] ]
</pre>

<p>
其中interval表示每隔x时间刷新一次输出，而count表示希望输出多少次.下面解释一下每隔参数的含义：
</p><ul>
<li>-c 产生CPU输出(只是生成CPU输出)
</li>
<li>-d 生成device使用情况输出
</li>
<li>-h 和-d一样只不过human readable一些(不过其实差不多)
</li>
<li>-k 统计数据按照kilobytes为单位
</li>
<li>-m 统计数据按照megabytes为单位
</li>
<li>-N TODO(dirlt)
</li>
<li>-p 选择block device以及其partitions.如果使用ALL的话那么选择所有block devices.
</li>
<li>-t 每次输出都是打印当前时间
</li>
<li>-V version
</li>
<li>-x 显示扩展数据(extended)
</li>
<li>-z 忽略输出那些在period期间没有任何活动的device.
</li>
</ul>

<p>iostat也可以指定选择输出哪些block device.
</p>
<p>
通常命令也就是iostat -d -k -x 1.我们来看看样例输出
</p>


<pre class="example">dirlt@dirlt-virtual-machine:~$ iostat -d -x -k 1
Linux 3.2.0-23-generic (dirlt-virtual-machine)  2012年06月18日  _x86_64_        (1 CPU)

xsDevice:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util
scd0              0.00     0.00    0.00    0.00     0.02     0.00     8.00     0.00   29.00   29.00    0.00  29.00   0.01
sda               6.34     5.72   15.95   12.60   192.62  5675.85   411.10     2.48   87.41   18.33  174.88   2.74   7.83

Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util
scd0              0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00
sda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00

Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util
scd0              0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00
sda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00
</pre>

<p>
然后分析其中字段：
</p><ul>
<li>Device 设备名
</li>
<li>tps number of transfers per second.对于IO device多个请求可能会合并成为一个transfer.不过似乎没有太大意义。
</li>
<li>Blk_read/s(kB_read/s, MB_read/s). 读速度，这里Block相当于一个扇区占据512bytes.
</li>
<li>Blk_wrtn/s(kB_wrtn/s, MB_wrtn/s). 写速度。
</li>
<li>Blk_read(kb_read, MB_read). 读总量
</li>
<li>Blk_wrtn(kB_wrtn, MB_wrtn). 写总量
</li>
<li>rrqm/s 每秒多少个读请求被merge.当系统调用需要读取数据的时候，VFS将请求发到各个FS，如果FS发现不同的读取请求读取的是相同Block的数据，FS会将这个请求合并Merge
</li>
<li>wrqm/s 每秒多少个些请求被merge
</li>
<li>r/s 每秒多少个读请求(after merged)
</li>
<li>w/s 每秒多少个写请求(after merged)
</li>
<li>rsec/s(rkB/s, rMB/s) 读速度。sec表示sector.
</li>
<li>wsec/s(wkB/s, wMB/s) 写速度
</li>
<li>avgrq-sz 提交到这个device queue上面请求的平均大小(in sectors)
</li>
<li>avgqu-sz 提交到这个device queue上面请求的平均长度
</li>
<li>await 提交到这个device上面请求处理的平均时间(ms)
</li>
<li>r_await 提交到这个device上面读请求处理的平均时间
</li>
<li>w_await 提交到这个device上面写请求处理的平均时间
</li>
<li>svctm TODO(dirlt):don't use it.
</li>
<li>%util CPU在处理IO请求时的百分比.可以认为是IO设备使用率.
</li>
</ul>


</div>

</div>

<div id="outline-container-1-3-17" class="outline-4">
<h4 id="sec-1-3-17"><span class="section-number-4">1.3.17</span> blockdev</h4>
<div class="outline-text-4" id="text-1-3-17">

<p>TODO(dirlt):
</p>
</div>

</div>

<div id="outline-container-1-3-18" class="outline-4">
<h4 id="sec-1-3-18"><span class="section-number-4">1.3.18</span> systemtap</h4>
<div class="outline-text-4" id="text-1-3-18">

<p>TODO(dirlt): <a href="http://sourceware.org/systemtap/">http://sourceware.org/systemtap/</a>
</p>
</div>

</div>

<div id="outline-container-1-3-19" class="outline-4">
<h4 id="sec-1-3-19"><span class="section-number-4">1.3.19</span> latencytop</h4>
<div class="outline-text-4" id="text-1-3-19">

<p>TODO(dirlt): <a href="https://latencytop.org/">https://latencytop.org/</a>
</p>
</div>

</div>

<div id="outline-container-1-3-20" class="outline-4">
<h4 id="sec-1-3-20"><span class="section-number-4">1.3.20</span> iotop</h4>
<div class="outline-text-4" id="text-1-3-20">

<p>TODO(dirlt):
</p>
</div>

</div>

<div id="outline-container-1-3-21" class="outline-4">
<h4 id="sec-1-3-21"><span class="section-number-4">1.3.21</span> htop</h4>
<div class="outline-text-4" id="text-1-3-21">

<p>TODO(dirlt):
</p>
</div>

</div>

<div id="outline-container-1-3-22" class="outline-4">
<h4 id="sec-1-3-22"><span class="section-number-4">1.3.22</span> cssh</h4>
<div class="outline-text-4" id="text-1-3-22">

<p>TODO(dirlt):
</p>
</div>

</div>

<div id="outline-container-1-3-23" class="outline-4">
<h4 id="sec-1-3-23"><span class="section-number-4">1.3.23</span> dstat</h4>
<div class="outline-text-4" id="text-1-3-23">

<p>TODO(dirlt): <a href="http://dag.wieers.com/rpm/packages/dstat/">http://dag.wieers.com/rpm/packages/dstat/</a>
</p>
</div>

</div>

<div id="outline-container-1-3-24" class="outline-4">
<h4 id="sec-1-3-24"><span class="section-number-4">1.3.24</span> slurm</h4>
<div class="outline-text-4" id="text-1-3-24">

<p>Simple Linux Utility for Resource Management 
TODO(dirlt): <a href="https://computing.llnl.gov/linux/slurm/">https://computing.llnl.gov/linux/slurm/</a>
</p>
</div>

</div>

<div id="outline-container-1-3-25" class="outline-4">
<h4 id="sec-1-3-25"><span class="section-number-4">1.3.25</span> sar</h4>
<div class="outline-text-4" id="text-1-3-25">

<p>sar - Collect, report, or save system activity information.
</p>
<p>
下面是所有的选项
</p><ul>
<li>-A 相当于指定 -bBcdqrRuvwWy -I SUM  -n FULL -P ALL.
</li>
<li>-b 这个选项只是针对2.5以下的内核.统计磁盘的IO运行情况
<ul>
<li>tps // 对磁盘总共有多少个请求.
</li>
<li>rtps // 对磁盘总共有多少个读请求.
</li>
<li>wtps // 对磁盘总共有多少个写请求.
</li>
<li>bread/s // 磁盘每秒多少个read block.(512bytes/block)
</li>
<li>bwrtn/s // 磁盘每秒多少个write block.(512bytes/block)
</li>
</ul>

</li>
<li>-B 内存页面情况
<ul>
<li>pgpgin/s // page in from disk
</li>
<li>pgpgout/s // page out to disk.
</li>
<li>fault/s // (major+mintor) page fault
</li>
<li>majflt/s // major page fault
</li>
</ul>

</li>
<li>-c 进程创建情况
<ul>
<li>proc/s 每秒创建进程个数
</li>
</ul>

</li>
<li>-d 块设备运行情况.打印出的dev m-n(major-mior device number)
<ul>
<li>tps 对这个设备总共有多少个请求.如果多个逻辑请求的话可能会结合成为一个请求.
</li>
<li>rd_sec/s 每秒读取多少个sector.一个sector 512bytes.
</li>
<li>wr_sec/s 每秒写入多少个sector.一个sector 512bytes.
</li>
</ul>

</li>
<li>-e hh:mm:ss 设置汇报的终止时间
</li>
<li>-f filename 从文件中读入
</li>
<li>-h -H 从文件读入时转换称为分析方便的格式
</li>
<li>-i interval 从文件中读入的话选取interval seconds的间隔的记录
</li>
<li>-I &lt;irq&gt; | SUM | ALL | XALL 中断统计
<ul>
<li>&lt;irq&gt; interrupt number
</li>
<li>SUM 所有中断次数之和/s
</li>
<li>ALL 前16个中断次数/s
</li>
<li>XALL 所有中断次数/s.包括APIC
</li>
</ul>

</li>
<li>-n DEV | EDEV | SOCK | FULL 网络统计数据
<ul>
<li>DEV 所有网络接口正常数据
</li>
<li>EDEV 所有网络接口异常数据
</li>
<li>SOCK socket数据统计
</li>
<li>FULL DEV + EDEV + SOCK
</li>
<li>关于网络接口显示数据在后面会仔细讨论
</li>
</ul>

</li>
<li>-o filename 可以将sar输出重定位
</li>
<li>-P &lt;cpu&gt; | ALL 处理器统计数据
</li>
<li>-q 处理器请求队列长度以及平均负载
<ul>
<li>runq-sz 处理器上有多少个进程在等待执行
</li>
<li>plist-sz 当前有多少个进程运行
</li>
<li>ldavg-1 过去1分钟系统负载
</li>
<li>ldavg-5 过去5分钟系统负载
</li>
<li>ldavg-15 过去15分钟系统负载
</li>
</ul>

</li>
<li>-r 内存和swap空间利用率数据
<ul>
<li>kbmemfree 多少free内存(KB)
</li>
<li>kbmemused 多少使用内存(KB)(不包括kernel使用)
</li>
<li>%memused 使用内存率
</li>
<li>kbbuffers kenel内部使用buffer(KB)
</li>
<li>kbcached kernel内部使用cache data(KB)
</li>
<li>kbswpfree swap可用大小(KB)
</li>
<li>kbswpused swap使用大小(KB)
</li>
<li>%swpused swap使用比率
</li>
<li>kbswpcad cached swap内存大小(KB)(曾经被换出现在换入，但是依然占用swap分区)
</li>
</ul>

</li>
<li>-R 内存使用数据
<ul>
<li>frmpg/s free出来的page数目/s
</li>
<li>bufpg/s 当做buffer使用的page数目/s
</li>
<li>campg/s 当做cache使用的page数目/s
</li>
</ul>

</li>
<li>-s hh:mm:ss 设置汇报起始时间
</li>
<li>-t 从文件载入时候使用使用原有locale time表示而不是当前locale
</li>
<li>-u CPU使用情况
<ul>
<li>%user 用户态CPU占用率
</li>
<li>%nice 用户态使用nice的CPU占用率
</li>
<li>%system 内核态CPU占用率
</li>
<li>%iowait CPU因为等待io的idle比率
</li>
<li>%idle CPU idle比率
</li>
</ul>

</li>
<li>-v inode,file以及kernel tables情况
<ul>
<li>dentunusd 在directory cache里面没有使用的cache entries个数
</li>
<li>file-sz 使用文件句柄数
</li>
<li>inode-sz 使用inode句柄数
</li>
<li>super-sz 内存使用的超级块句柄数
</li>
<li>%super-sz 当前超级块句柄数使用比率
</li>
<li>dquot-sz 磁盘配额分配的entries个数
</li>
<li>%dquot-sz 磁盘配额分配的entries比率
</li>
<li>rtsig-sz 排队的RT signals数量
</li>
<li>%rtsig-sz 排队的RT signals比率
</li>
</ul>

</li>
<li>-V 版本号
</li>
<li>-w 系统切换情况
<ul>
<li>cswch/s 上下文切换次数/s
</li>
</ul>

</li>
<li>-W swap统计数据
<ul>
<li>pswpin/s 每秒换入swap pages
</li>
<li>pswpout/s 每秒换出swap pages
</li>
</ul>

</li>
<li>-x pid | SELF | ALL  进程统计数据
<ul>
<li>minflt/s minor faults/s
</li>
<li>majflt/s major faults/s
</li>
<li>%user 用户态CPU利用率
</li>
<li>%system 内核态CPU利用率
</li>
<li>nswap/s 每秒换出pages
</li>
<li>CPU 处理器编号
</li>
</ul>

</li>
<li>-X pid | SELF | ALL 统计子进程数据
<ul>
<li>cminflt/s
</li>
<li>cmajflt/s
</li>
<li>%cuser
</li>
<li>%csystem
</li>
<li>cnswaps/s
</li>
</ul>

</li>
<li>-y TTY设备情况
<ul>
<li>rcvin/s 每个serial line接收中断数目/s
</li>
<li>xmtin/s 每个serial line发出中断数目/s
</li>
</ul>

</li>
</ul>



<hr/>

<p>
关于网络接口数据显示的话，下面是使用DEV可以查看的字段
</p><ul>
<li>IFACE network interface
</li>
<li>rxpck/s rcv packets/s
</li>
<li>txpck/s snd packets/s
</li>
<li>rxbyt/s rcv bytes/s
</li>
<li>txbyt/s snd bytes/s
</li>
<li>rxcmp/s rcv compressed packets/s
</li>
<li>txcmp/s snd compressed packets/s
</li>
<li>rxmcst/s 接收多播packets/s
</li>
</ul>

<p>下面是使用EDEV可以查看的字段
</p><ul>
<li>rxerr/s 接收bad packets/s
</li>
<li>txerr/s 发送bad packets/s
</li>
<li>coll/s 每秒发送packets出现collisions数目
</li>
<li>rxdrop/s 每秒因为linux缺少buffer而丢弃packets
</li>
<li>txcarr/s 每秒发送packets出现carrier-errors数目
</li>
<li>rxfram/s 每秒接收packets出现frame alignment error数目
</li>
<li>rxfifo/s 每秒接收packets出现FIFO overrun error数目
</li>
<li>txfifo/s 每秒发送packets出现FIFO overrun error数目
</li>
</ul>

<p>下面是使用SOCK可以查看的字段
</p><ul>
<li>totsock 总共使用socket数目
</li>
<li>tcpsck 正在使用tcp socket数目
</li>
<li>udpsck 正在使用udp socket数目
</li>
<li>rawsck 正在使用RAW socket数目
</li>
<li>ip-frag 当前使用IP fragments数目
</li>
</ul>



<hr/>

<p>
选项非常多，但是很多选项没有必要打开。对于网络程序来说的话，通常我们使用到的选项会包括
</p><ul>
<li>-n DEV 网卡流量
</li>
<li>-n EDEV 网卡丢包以及kerner buffer问题
</li>
<li>-n SOCK 多少连接
</li>
<li>-r 内存使用。不常用。很多时候只关心大概使用多少内存，是否持续增长)
</li>
<li>-u CPU使用 -P ALL查看所有CPU
</li>
<li>-w 上下文切换。相对来说也不常用。
</li>
</ul>

<p>通常我们使用的命令就应该是sar -n DEV -P ALL -u 1 0(1表示1秒刷新，0表示持续显示)
</p>


<pre class="example">01时56分18秒       CPU     %user     %nice   %system   %iowait     %idle
01时56分19秒       all      7.52      0.00     78.95      0.25     13.28
01时56分19秒         0      7.00      0.00     81.00      0.00     12.00
01时56分19秒         1      7.92      0.00     79.21      0.00     12.87
01时56分19秒         2      9.00      0.00     78.00      1.00     12.00
01时56分19秒         3      7.07      0.00     77.78      0.00     15.15

01时56分18秒     IFACE   rxpck/s   txpck/s   rxbyt/s   txbyt/s   rxcmp/s   txcmp/s  rxmcst/s
01时56分19秒        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
01时56分19秒      eth0      0.00      0.00      0.00      0.00      0.00      0.00      0.00
01时56分19秒      eth1 159997.00 320006.00 175029796.00 186239160.00      0.00      0.00      0.00
</pre>


</div>

</div>

<div id="outline-container-1-3-26" class="outline-4">
<h4 id="sec-1-3-26"><span class="section-number-4">1.3.26</span> netstat</h4>
<div class="outline-text-4" id="text-1-3-26">

<p>netstat - Print network connections, routing tables, interface statistics, masquerade connections, and multicast memberships
</p>
<p>
netstat可以查看很多信息，包括网络链接,路由表，网卡信息,伪装链接以及多播成员关系。但是从文档上看，一部分工作可以在/sbin/ip里面完成
</p>


<pre class="example">NOTE
       This program is obsolete.  Replacement for netstat is ss.  Replacement
       for netstat -r is ip route.  Replacement for netstat -i is ip -s link.
       Replacement for netstat -g is ip maddr.
</pre>

<p>
我们这里打算对netstat使用限制在查看网络连接，以及各种协议的统计数据上.
</p>

<hr/>

<p>
首先我们看看如何查看各种协议的统计数据.
</p>


<pre class="example">netstat {--statistics|-s} [--tcp|-t] [--udp|-u] [--raw|-w] [delay]
</pre>

<p>
我们可以查看和tcp,udp以及raw socket相关的数据,delay表示刷新时间。
</p>




<pre class="example">[zhangyan04@tc-hpc-dev.tc.baidu.com]$ netstat -s
Ip:
    322405625 total packets received
    0 forwarded
    0 incoming packets discarded
    322405625 incoming packets delivered
    369134846 requests sent out
    33 dropped because of missing route
Icmp:
    30255 ICMP messages received
    0 input ICMP message failed.
    ICMP input histogram:
        echo requests: 30170
        echo replies: 83
        timestamp request: 2
    30265 ICMP messages sent
    0 ICMP messages failed
    ICMP output histogram:
        destination unreachable: 10
        echo request: 83
        echo replies: 30170
        timestamp replies: 2
IcmpMsg:
        InType0: 83
        InType8: 30170
        InType13: 2
        OutType0: 30170
        OutType3: 10
        OutType8: 83
        OutType14: 2
Tcp:
    860322 active connections openings
    199165 passive connection openings
    824990 failed connection attempts
    43268 connection resets received
    17 connections established
    322306693 segments received
    368937621 segments send out
    56075 segments retransmited
    0 bad segments received.
    423873 resets sent
Udp:
    68643 packets received
    10 packets to unknown port received.
    0 packet receive errors
    110838 packets sent
UdpLite:
TcpExt:
    1999 invalid SYN cookies received
    5143 resets received for embryonic SYN_RECV sockets
    2925 packets pruned from receive queue because of socket buffer overrun
    73337 TCP sockets finished time wait in fast timer
    85 time wait sockets recycled by time stamp
    4 delayed acks further delayed because of locked socket
    Quick ack mode was activated 7106 times
    5141 times the listen queue of a socket overflowed
    5141 SYNs to LISTEN sockets ignored
    81288 packets directly queued to recvmsg prequeue.
    297394763 packets directly received from backlog
    65102525 packets directly received from prequeue
    180740292 packets header predicted
    257396 packets header predicted and directly queued to user
    5983677 acknowledgments not containing data received
    176944382 predicted acknowledgments
    2988 times recovered from packet loss due to SACK data
    Detected reordering 9 times using FACK
    Detected reordering 15 times using SACK
    Detected reordering 179 times using time stamp
    835 congestion windows fully recovered
    1883 congestion windows partially recovered using Hoe heuristic
    TCPDSACKUndo: 1806
    1093 congestion windows recovered after partial ack
    655 TCP data loss events
    TCPLostRetransmit: 6
    458 timeouts after SACK recovery
    7 timeouts in loss state
    3586 fast retransmits
    178 forward retransmits
    425 retransmits in slow start
    51048 other TCP timeouts
    37 sack retransmits failed
    1610293 packets collapsed in receive queue due to low socket buffer
    7094 DSACKs sent for old packets
    14430 DSACKs received
    4358 connections reset due to unexpected data
    12564 connections reset due to early user close
    29 connections aborted due to timeout
    TCPDSACKIgnoredOld: 12177
    TCPDSACKIgnoredNoUndo: 347
    TCPSackShifted: 6421
    TCPSackMerged: 5600
    TCPSackShiftFallback: 119131
IpExt:
    InBcastPkts: 22
    InOctets: 167720101517
    OutOctets: 169409102263
    InBcastOctets: 8810
</pre>

<p>
内容非常多这里也不详细分析了。
</p>

<hr/>

<p>
然后看看连接这个部分的功能
</p>


<pre class="example">netstat  [address_family_options]  [--tcp|-t]  [--udp|-u]   [--raw|-w]
[--listening|-l]       [--all|-a]      [--numeric|-n]      [--numeric-
hosts][--numeric-ports][--numeric-ports]               [--symbolic|-N]
[--extend|-e[--extend|-e]] [--timers|-o] [--program|-p] [--verbose|-v]
[--continuous|-c] [delay]
</pre>

<p>
对于address_family允许指定协议族，通常来说我们可能会使用
</p><ul>
<li>&ndash;unix -x unix域协议族
</li>
<li>&ndash;inet &ndash;ip ip协议族
</li>
</ul>

<p>然后剩下的选项
</p><ul>
<li>&ndash;tcp -t tcp socket
</li>
<li>&ndash;udp -u udp socket
</li>
<li>&ndash;raw -w raw socket
</li>
<li>&ndash;listening -l listen socket
</li>
<li>&ndash;all -a listen socket和connected socket.
</li>
<li>&ndash;numeric -n
</li>
<li>&ndash;numeric-hosts
</li>
<li>&ndash;numeric-ports
</li>
<li>&ndash;numeric-users
</li>
<li>&ndash;symbolic -N ???
</li>
<li>&ndash;extend -e 扩展信息
</li>
<li>&ndash;timers -o 网络计时器信息(???)
</li>
<li>&ndash;program -p socket所属program
</li>
<li>&ndash;verbose -v
</li>
<li>&ndash;continuous -c 1s刷新
</li>
<li>delay 刷新时间(sec)
</li>
</ul>


<p>
我们看看一个使用的例子
</p>


<pre class="example">[zhangyan04@tc-hpc-dev.tc.baidu.com]$ netstat --ip --tcp -a -e -p
(Not all processes could be identified, non-owned process info
 will not be shown, you would have to be root to see it all.)
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address               Foreign Address             State       User       Inode      PID/Program name
tcp        0      0 tc-hpc-dev.tc.baidu.c:19870 *:*                         LISTEN      zhangyan04 30549010   28965/echo_server
tcp     1024      0 tc-hpc-dev.tc.baidu.c:19870 tc-com-test00.tc.baid:60746 ESTABLISHED zhangyan04 30549012   28965/echo_server
tcp        0   1024 tc-hpc-dev.tc.baidu.c:19870 tc-com-test00.tc.baid:60745 ESTABLISHED zhangyan04 30549011   28965/echo_server
</pre>


<p>
下面是对于tcp socket的字段解释.对于unix domain socket字段不同但是这里不写出来了.
</p><ul>
<li>Proto socket类型
</li>
<li>Recv-Q 在这个socket上还有多少bytes没有copy到用户态
</li>
<li>Send-Q 在这个socket还有多少bytes没有ack
</li>
<li>Local Address 本地地址
</li>
<li>Foreign Address 远程地址
</li>
<li>State 连接状态
<ul>
<li>ESTABLISHED
</li>
<li>SYN_SENT
</li>
<li>SYN_RECV
</li>
<li>FIN_WAIT1
</li>
<li>FIN_WAIT2
</li>
<li>TIME_WAIT
</li>
<li>CLOSED
</li>
<li>CLOSE_WAIT 大量状态表示服务器句柄泄露
</li>
<li>LAST_ACK
</li>
<li>LISTEN
</li>
<li>CLOSING
</li>
<li>UNKNOWN
</li>
</ul>

</li>
<li>User
</li>
<li>PID/Program name
</li>
</ul>


</div>

</div>

<div id="outline-container-1-3-27" class="outline-4">
<h4 id="sec-1-3-27"><span class="section-number-4">1.3.27</span> ifconfig</h4>
<div class="outline-text-4" id="text-1-3-27">

<p>ifconfig - configure a network interface
</p>
<p>
/sbin/ifconfig可以用来配置和查看network interface.不过从文档上看的话，更加推荐使用/sbin/ip这个工具
</p>


<pre class="example">NOTE
       This  program is obsolete!  For replacement check ip addr and ip link.
       For statistics use ip -s link.
</pre>


<p>
这里我们不打算学习如何配置network interface只是想查看一下网卡的信息。使用/sbin/ifconfig -a可以查看所有的网卡信息，即使这个网卡关闭。
</p>


<pre class="example">[zhangyan04@tc-hpc-dev.tc.baidu.com]$ /sbin/ifconfig -a
eth0      Link encap:Ethernet  HWaddr 00:1D:09:22:C9:A9
          BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)
          Interrupt:16 Memory:f4000000-f4012800

eth1      Link encap:Ethernet  HWaddr 00:1D:09:22:C9:A7
          inet addr:10.26.140.39  Bcast:10.26.140.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:90671796 errors:0 dropped:14456 overruns:0 frame:0
          TX packets:143541932 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:71169282564 (66.2 GiB)  TX bytes:74096812979 (69.0 GiB)
          Interrupt:16 Memory:f8000000-f8012800

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:231762640 errors:0 dropped:0 overruns:0 frame:0
          TX packets:231762640 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:98089257363 (91.3 GiB)  TX bytes:98089257363 (91.3 GiB)
</pre>

<p>
我们这里稍微仔细看看eht1的网卡信息
</p><ul>
<li>encap 网卡连接网络类型Ethernet(以太网)
</li>
<li>HWaddr 网卡物理地址
</li>
<li>inet_addr 绑定IP地址
</li>
<li>Bcast 这个IP对应的广播地址
</li>
<li>Mask 子网掩码
</li>
<li>UP(打开) BROADCAST(广播) MULTICAST(多播) RUNNING(运行)
</li>
<li>MTU (Maximum Transport Unit)最大传输单元，以太网一般就是1500字节
</li>
<li>Metric ???
</li>
<li>RX packets 接受packets数目
</li>
<li>TX packets 传输packets数目
</li>
<li>errors 错误packets数目
</li>
<li>dropped 丢弃packets数目
</li>
<li>overruns frame carrier ???
</li>
<li>collisions ???
</li>
<li>txqueuelen 发送packets的queue长度上限.0应该是无限
</li>
<li>RX bytes 接收字节
</li>
<li>TX bytes 发送字节
</li>
</ul>


</div>

</div>

<div id="outline-container-1-3-28" class="outline-4">
<h4 id="sec-1-3-28"><span class="section-number-4">1.3.28</span> /sbin/ip</h4>
<div class="outline-text-4" id="text-1-3-28">

<p>TODO(zhangyan04):
</p>
</div>

</div>

<div id="outline-container-1-3-29" class="outline-4">
<h4 id="sec-1-3-29"><span class="section-number-4">1.3.29</span> ping</h4>
<div class="outline-text-4" id="text-1-3-29">

<p>TODO(zhangyan04):
</p>
</div>

</div>

<div id="outline-container-1-3-30" class="outline-4">
<h4 id="sec-1-3-30"><span class="section-number-4">1.3.30</span> route</h4>
<div class="outline-text-4" id="text-1-3-30">

<p>TODO(zhangyan04):
</p>
</div>

</div>

<div id="outline-container-1-3-31" class="outline-4">
<h4 id="sec-1-3-31"><span class="section-number-4">1.3.31</span> tcpdump</h4>
<div class="outline-text-4" id="text-1-3-31">

<p>TODO(zhangyan04):
</p>
</div>

</div>

<div id="outline-container-1-3-32" class="outline-4">
<h4 id="sec-1-3-32"><span class="section-number-4">1.3.32</span> httperf</h4>
<div class="outline-text-4" id="text-1-3-32">

<p>download <a href="http://www.hpl.hp.com/research/linux/httperf/">http://www.hpl.hp.com/research/linux/httperf/</a>
</p>
<p>
paper <a href="http://www.hpl.hp.com/research/linux/httperf/wisp98/httperf.pdf">http://www.hpl.hp.com/research/linux/httperf/wisp98/httperf.pdf</a>
</p>
<p>
httperf是用来测试HTTP server性能的工具，支持HTTP1.0和1.1.下面是这个工具命令行参数
</p>


<pre class="example">httperf  [--add-header S] [--burst-length N] [--client I/N] [--close-with-reset] [-d|--debug N] [--failure-
status N] [-h|--help] [--hog] [--http-version S] [--max-connections N] [--max-piped-calls N]  [--method  S]
[--no-host-hdr]  [--num-calls  N]  [--num-conns  N]  [--period  [d|u|e]T1[,T2]]  [--port  N] [--print-reply
[header|body]] [--print-request [header|body]] [--rate X] [--recv-buffer N]  [--retry-on-failure]  [--send-
buffer  N]  [--server  S]  [--server-name  S] [--session-cookie] [--ssl] [--ssl-ciphers L] [--ssl-no-reuse]
[--think-timeout X] [--timeout X] [--uri S] [-v|--verbose] [-V|--version] [--wlog  y|n,F]  [--wsess  N,N,X]
[--wsesslog N,X,F] [--wset N,X]
</pre>

<p>
httperf有几种不同的workload方式：
</p><ul>
<li>request-oriented(RO)
</li>
<li>session-oriented(SO)
</li>
</ul>

<p>NOTE(dirlt):关于session-oriented这个概念，是后来看了论文里面才清楚的。主要解决的就是实际中browse的场景。
通常我们请求一个页面里面都会嵌入很多objects包括js或者是css等。我们一次浏览称为session,而session里面会有很多请求。
这些请求通常是，首先等待第一个请求处理完成(浏览器解析页面)，然后同时发起其他请求。
</p>
<p>
下面是每个参数含义
</p><ul>
<li>&ndash;add-header=S 在http里面添加header. 比如&ndash;add-header="Referer: foo\nAuth: Secret\n".允许使用转义字符。
</li>
<li>&ndash;burst-length=N 每个burst包含N个calls.
</li>
<li>&ndash;no-host-hdr 在header不带上Host字段
</li>
<li>&ndash;client=I/N 指定我们模拟实际有N个clients而我们作为第I个clients情况。因为一些参数会根据clients的特征不同生成不同的workload.如果是单机情况的话那么就是0/1
</li>
<li>&ndash;close-with-reset 不通过正常关闭流程而是直接RST分节
</li>
<li>&mdash;debug=N 调试级别
</li>
<li>&ndash;failure-status=N 如果http coder=N的话那么就认为失败
</li>
<li>&ndash;help
</li>
<li>&ndash;hog 尽可能使用更多的TCP端口。在压力测试下通常开启
</li>
<li>&ndash;http-version=S 指定http协议版本
</li>
<li>&ndash;max-conections=N 在一个session上最多建立N个连接。(session?)
</li>
<li>&ndash;max-piped-calls=N 在一个连接上最多发起N个pipelined calls.(非阻塞上write多次然后read多次)
</li>
<li>&ndash;method=S 指定http请求方法
</li>
<li>&ndash;num-calls=N RO模式下有效。每个connection上发起N次calls.如果如果burst-length=B的话那么，一次发起B个pipelined calls.总共发起N/B个bursts.
</li>
<li>&ndash;num-conns=N RO模式下有效。指定创建多少个链接。对于一个测试来说的话，必须等待到N个connections完成或者是失败。失败定义是在连接上没有任何活动超过&ndash;timeout或者是&ndash;think-timeout.
</li>
<li>&ndash;period=[D]T1[,T2] 各个连接或者是session之间创建的时间间隔，包括固定间隔，泊松分布以及一致分布。&ndash;rate只是&ndash;period的简化用法，作为固定间隔使用。
</li>
<li>&ndash;port=N webserver服务端口
</li>
<li>&ndash;print-reply[=[header|body]] 打印响应
</li>
<li>&ndash;print-request[=[header|body]] 打印请求
</li>
<li>&ndash;rate=X 每秒创建多少个链接或者是session.在每秒内链接或者是session都是均匀创建。如果==0的话表示所有连接/session都是顺序创建(等待前面一个链接/session完成之后才创建下一个).
</li>
<li>&ndash;recv-buffer=N 接收缓冲区大小
</li>
<li>&ndash;retry-on-failure 失败的话会继续重试
</li>
<li>&ndash;send-buffer=N 发送缓冲区大小
</li>
<li>&ndash;server=S webserver服务地址
</li>
<li>&ndash;server=name=S 设置header的Host字段
</li>
<li>&ndash;session-cookie ???
</li>
<li>&ndash;ssl 使用SSL进行通信
</li>
<li>&ndash;ssl-ciphers=L SSL相关 TODO(dirlt):
</li>
<li>&ndash;ssl-no-reuse SSL相关 TODO(dirlt):
</li>
<li>&ndash;think-timeout=X 这个主要是为了解决动态页面。如果是静态页面可以直接=0.这个超时主要是为了考虑动态页面生成时间。
</li>
<li>&ndash;timeout=X 超时时间。默认无限。
</li>
<li>&ndash;uri=S 请求URI.比如&ndash;uri=/foreground/all_stars
</li>
<li>&ndash;verbose
</li>
<li>&ndash;wlog=B,F 允许从文件中读取访问的URI.其中B表示是否读取，F表示要读取的文件。
</li>
<li>&ndash;wsess=N1,N2,X 是用session模式测试。发起N1个session，一个session内部会调用N2次calls.calls被聚合称为burst.各个burst之间等待X秒(这里称为user-think time.还是很贴切的。这个就好比用户浏览一次页面之后，看一段时间，然后访问下一个页面).通过burst-length来控制一次burst中间存在多少个calls.工作场景是首先发起一个calls,然后将其余calls发送。定义session成功或者是失败，是要求任意一个calls不能超过超时时间。
</li>
<li>&ndash;wsesslog=N,X,F 类似于&ndash;wess选项，但是关于请求以及各种参数可以从文件读取。N表示发起多少个session,X表示user-think time.F就是提供其他内容的文件。
</li>
<li>&ndash;wset=N,X 生成URI用来访问。其中X=0.25的话表示每次生成的URI都会访问4次。N表示生成多少个页面。假设N=100的话，那么从[0,100]，对于每个数字补齐到N-1的数字位，比如9就是09.然后根据每个数字分隔形成0/9.如果URI为x作为前缀，那么就是x/0/9.html.
</li>
</ul>


<p>
NOTE(dirlt):不过httperf采用select模型，导致最大连接数存在上限。
</p>
<p>
然后来看看具体结果
</p>


<pre class="example">Total: connections 30000 requests 29997 replies 29997 test-duration 299.992 s

Connection rate: 100.0 conn/s (10.0 ms/conn, &lt;=14 concurrent connections) 
Connection time [ms]: min 1.4 avg 3.0 max 163.4 median 1.5 stddev 7.3 
Connection time [ms]: connect 0.6
Connection length [replies/conn]: 1.000

Request rate: 100.0 req/s (10.0 ms/req)
Request size [B]: 75.0

Reply rate [replies/s]: min 98.8 avg 100.0 max 101.2 stddev 0.3 (60 samples)
Reply time [ms]: response 2.4 transfer 0.0
Reply size [B]: header 242.0 content 1010.0 footer 0.0 (total 1252.0)
Reply status: 1xx=0 2xx=29997 3xx=0 4xx=0 5xx=0

CPU time [s]: user 94.31 system 205.26 (user 31.4% system 68.4% total 99.9%)
Net I/O: 129.6 KB/s (1.1*10^6 bps)

Errors: total 3 client-timo 0 socket-timo 0 connrefused 3 connreset 0
Errors: fd-unavail 0 addrunavail 0 ftab-full 0 other 0
</pre>

<p>
我们可能最需要关心的就是Request和Reply部分了，但是大部分字段还是很好理解的。其中repsonse表示从发出第一个字节到接收到第一个字节时间，而transfer表示接收reply的时间。Connection部分的话，connection rate表示发起connection频率，concurrent connections表示并发数最高达到14个连接。connection time表示从connection发起到断开间隔，connection connect表示建立连接时间。connection length表示reply和connection数目比。
</p>
<p>
如果使用session模式的话，那么结果会有
</p>


<pre class="example">Session rate [sess/s]:min 0.00 avg 0.59 max 2.40 stddev0.37 (240/450)
Session:avg6.45 connections/session
Session lifetime [s]:123.9
Session failtime [s]:58.5
Session length histogram:4 7 4... 3 3 240
</pre>

<p>
session rate表示session完成频率。240/250表示发起250个但是完成240个。session length表示每个session包含多少个连接。lifetime平均每个session完成占用时间，failtime平均每个session要是失败的话在失败之前占用时间。length historagm表示每个session得到的reply个数，4个没有接收到任何reply,7个接受到1个。
</p>
</div>

</div>

<div id="outline-container-1-3-33" class="outline-4">
<h4 id="sec-1-3-33"><span class="section-number-4">1.3.33</span> ab</h4>
<div class="outline-text-4" id="text-1-3-33">

<p>ab(apache benchmarking)是apache httpd自带的一个HTTP Server个的工具。下面是这个工具命令行参数
</p>


<pre class="example">ab  [ -A auth-username:password ] [ -b windowsize ] [ -c concurrency ] [ -C cookie-name=value ] [ -d ] [ -e
csv-file ] [ -f protocol ] [ -g gnuplot-file ] [ -h ] [ -H custom-header ] [ -i ] [ -k ] [ -n requests ]  [
-p  POST-file  ] [ -P proxy-auth-username:password ] [ -q ] [ -r ] [ -s ] [ -S ] [ -t timelimit ] [ -T con‐
tent-type ] [ -u PUT-file ] [ -v verbosity] [ -V ] [ -w ] [ -x &lt;table&gt;-attributes ] [ -X proxy[:port]  ]  [
-y &lt;tr&gt;-attributes ] [ -z &lt;td&gt;-attributes ] [ -Z ciphersuite ] [http[s]://]hostname[:port]/path
</pre>

<p>
功能上没有httperf多但是觉得应该大部分时候足够使用的。
</p>
<p>
NOTE(dirlt):ab和httperf工作模型不同。httperf是指定建立多少个链接，每个链接上发起多少个calls。而ab指定一共发送多少个请求，
每批发送多少个请求，然后计算每批时间统计。ab必须等待这批请求全部返回或者是失败或者是超时。可以作为对方的互补。nice!!!
</p>
<p>
下面看看每个参数的含义：
</p><ul>
<li>-A auth-username:password 提供Basic Auth选项
</li>
<li>-b windowsize TCP的读写buffer
</li>
<li>-c concurrency 每次发起请求数目(认为这是一批请求，必须等待这批请求完全返回)这个和httperf模型还不太相同。
</li>
<li>-C cookie-name=value 提供cookie参数
</li>
<li>-d
</li>
<li>-e csv-file 提供CSV文件包含处理请求时间在各个级别上的百分比，通常结合gnuplot使用。
</li>
<li>-f protocol 指定SSL/TSL协议
</li>
<li>-g gnuplot-file 将测量参数写成gnuplot格式或者是TSV(Tab separate values)文件可以导入Gnuplot或者是Excel中
</li>
<li>-h 帮助信息
</li>
<li>-H custom-header 提供自定义头
</li>
<li>-i 发送HEAD而不是GET请求
</li>
<li>-k 使用keepalive选项
</li>
<li>-n requests 总共发起请求数目
</li>
<li>-p POST-file 指定文件提供POST数据。通常需要设置content-type.
</li>
<li>-P proxy-auth-username:password 为proxy提供Basic Auth验证。
</li>
<li>-q 安静模式
</li>
<li>-r socket处理错误不退出
</li>
<li>-s
</li>
<li>-S
</li>
<li>-t timelimit 作为benchmark总体时间，内部就使用-n 50000.默认没有超时
</li>
<li>-T content-type 设置content-type.
</li>
<li>-u PUT-file 指定文件提供PUT数据。通常需要设置content-type.
</li>
<li>-v
</li>
<li>-V
</li>
<li>-w 将结果输出成为HTML文件
</li>
<li>-x &lt;table&gt;-attributes 设置HTML文件的table属性
</li>
<li>-X proxy[:port] 设置proxy服务器
</li>
<li>-y &lt;tr&gt;-attributes 设置HTML文件的tr属性
</li>
<li>-z &lt;td&gt;-attributes 设置HTML文件的td属性
</li>
<li>Z ciphersuite 指定SSL/TLS cipher suite
</li>
</ul>


<p>
我们可以这样使用ab -c 100 -n 10000 -r localhost/ 输出还是很好理解的。对于最后面百分比时间，注意是包含100个concurrency的结果。
</p>


<pre class="example">Server Software:        nginx/1.2.1
Server Hostname:        localhost
Server Port:            80

Document Path:          /
Document Length:        1439 bytes

Concurrency Level:      100
Time taken for tests:   0.760 seconds
Complete requests:      10000
Failed requests:        0
Write errors:           0
Total transferred:      16500000 bytes
HTML transferred:       14390000 bytes
Requests per second:    13150.09 [#/sec] (mean)
Time per request:       7.605 [ms] (mean)
Time per request:       0.076 [ms] (mean, across all concurrent requests)
Transfer rate:          21189.11 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   1.4      0      18
Processing:     2    7   1.8      7      20
Waiting:        1    7   1.8      7      20
Total:          5    7   2.0      7      20

Percentage of the requests served within a certain time (ms)
  50%      7
  66%      7
  75%      8
  80%      8
  90%      9
  95%     10
  98%     14
  99%     19
 100%     20 (longest request)
</pre>


</div>

</div>

<div id="outline-container-1-3-34" class="outline-4">
<h4 id="sec-1-3-34"><span class="section-number-4">1.3.34</span> autobench</h4>
<div class="outline-text-4" id="text-1-3-34">

<p><a href="http://www.xenoclast.org/autobench/">http://www.xenoclast.org/autobench/</a>
</p>
<p>
autobench作为httperf包装，也提供了分布式压力测试的工具。
</p>
<p>
这里先介绍一下单机使用情况。autobench的manpage提供了非常清晰的说明 <a href="http://www.xenoclast.org/autobench/man/autobench.html">http://www.xenoclast.org/autobench/man/autobench.html</a>. 可以看到autobench提供了比较两个站点的性能。
</p><ul>
<li>&ndash;file 性能测试结果
</li>
<li>&ndash;high_rate 指定最高rate
</li>
<li>&ndash;low_rate 指定最低rate(所谓rate和httperf相同)
</li>
<li>&ndash;rate_step rate的步进
</li>
<li>&ndash;host1
</li>
<li>&ndash;host2
</li>
<li>&ndash;port1
</li>
<li>&ndash;port2
</li>
<li>&ndash;num_conn 总连接数
</li>
<li>&ndash;num_call 单个连接的调用次数
</li>
<li>&ndash;output_fmt 测试结果格式有TSV和CSV
</li>
<li>&ndash;quiet
</li>
<li>&ndash;single_host 只是测量单个host
</li>
<li>&ndash;timeout
</li>
<li>&ndash;uri1
</li>
<li>&ndash;uri2
</li>
<li>&ndash;version
</li>
</ul>

<p>默认配置文件是~/.autobench.conf,方便经常使用。常用命令方式就是
</p>


<pre class="example">autobench --single_host --host1=localhost --port1=19880 --low_rate=10 --high_rate=1000 --rate_step=100 --num_conn=10000 --num_call=1 --file=bench.tsv
autobench --host1=www.sina.com --host2=www.sohu.com  --low_rate=10 --high_rate=1000 --rate_step=100 --num_conn=10000 --num_call=1 --file=bench.tsv
</pre>


<p>
得到tsv文件之后可以使用bench2graph转换成为png格式。bench2graph需要做一些修改
</p>


<pre class="example">#echo set terminal postscript color &gt; gnuplot.cmd
echo set terminal png xffffff &gt; gnuplot.cmd

#echo set data style linespoints &gt;&gt; gnuplot.cmd
echo set style data linespoints &gt;&gt; gnuplot.cmd
</pre>

<p>
使用bench2graph bench.tsv bench.png,然后会提示输入title即可生成比较图。
</p>
<p>
TODO(dirlt):后续可能需要学习如何使用autobench分布式测试，因为httperf该死的select模型。
</p>
</div>

</div>

<div id="outline-container-1-3-35" class="outline-4">
<h4 id="sec-1-3-35"><span class="section-number-4">1.3.35</span> iftop</h4>
<div class="outline-text-4" id="text-1-3-35">

<p>TODO(dirlt): <a href="http://www.ex-parrot.com/~pdw/iftop/">http://www.ex-parrot.com/~pdw/iftop/</a>
</p>
</div>

</div>

<div id="outline-container-1-3-36" class="outline-4">
<h4 id="sec-1-3-36"><span class="section-number-4">1.3.36</span> iftraf</h4>
<div class="outline-text-4" id="text-1-3-36">

<p>TODO(dirlt): <a href="http://iptraf.seul.org/">http://iptraf.seul.org/</a>
</p>
</div>

</div>

<div id="outline-container-1-3-37" class="outline-4">
<h4 id="sec-1-3-37"><span class="section-number-4">1.3.37</span> rsync</h4>
<div class="outline-text-4" id="text-1-3-37">

<p>常用选项：
</p><ul>
<li>-a &ndash;archive
</li>
<li>-r &ndash;recursive
</li>
<li>-v &ndash;verbose
</li>
<li>-z &ndash;compress
</li>
</ul>


</div>

</div>

<div id="outline-container-1-3-38" class="outline-4">
<h4 id="sec-1-3-38"><span class="section-number-4">1.3.38</span> ttyload</h4>
<div class="outline-text-4" id="text-1-3-38">

</div>

</div>

<div id="outline-container-1-3-39" class="outline-4">
<h4 id="sec-1-3-39"><span class="section-number-4">1.3.39</span> iodump</h4>
<div class="outline-text-4" id="text-1-3-39">

</div>

</div>

<div id="outline-container-1-3-40" class="outline-4">
<h4 id="sec-1-3-40"><span class="section-number-4">1.3.40</span> iopp</h4>
<div class="outline-text-4" id="text-1-3-40">

</div>

</div>

<div id="outline-container-1-3-41" class="outline-4">
<h4 id="sec-1-3-41"><span class="section-number-4">1.3.41</span> screen</h4>
<div class="outline-text-4" id="text-1-3-41">

<ul>
<li id="sec-1-3-41-1">使用screen启动后台任务<br/>
<ul>
<li>screen创建一个新会话
</li>
<li>在会话里面执行命令
</li>
<li>C-a d从这个会话里面detach出来
</li>
<li>screen -s &lt;session&gt; 可以重新attach上这个会话。
</li>
</ul>




</li>
</ul>
</div>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> index</h2>
<div class="outline-text-2" id="text-2">


<p>
我叫章炎{dirtysalt}{dirlt}.我是一名软件工程师：
</p><ul>
<li>2012.5-now 在友盟{Umeng}的数据平台{DataPlatform}工作，主要是负责统计数据处理。
</li>
<li>2008-2012.5 在百度{Baidu}的基础架构部{Infrastructure}工作，主要负责基础组件，开发工具以及分布式系统。
</li>
</ul>


<p>
可以从我的linkedin里面看到我做过的projects。感觉自己对各方面都感兴趣，不过现在关注的主要是:
</p><ul>
<li>计算机系统(Compute System)
</li>
<li>网络编程框架(Network Programming)
</li>
<li>单机存储系统(Storage)
</li>
<li>分布式实践(Distributed System)
</li>
<li>程序设计语言和设计模式(Programming Language and Design Pattern)
</li>
</ul>


<p>
我想找到自己最爱的编程语言，然后快速地写出有用的程序。(现在自认为还没有做到这点,what a shame!)
</p><ul>
<li>linkedin <a href="http://www.linkedin.com/in/dirlt">http://www.linkedin.com/in/dirlt</a>
</li>
<li>邮箱 <a href="mailto:dirtysalt1987@gmail.com">dirtysalt1987@gmail.com</a>
</li>
<li>博客 <a href="http://dirlt.com/blog">http://dirlt.com/blog</a>
</li>
<li>新浪微博 <a href="http://weibo.com/dirlt">http://weibo.com/dirlt</a>
</li>
<li>github <a href="https://github.com/dirtysalt">https://github.com/dirtysalt</a>
</li>
</ul>


<p>
感谢xuchaoqian同学提供给我的空间，让我可以在上面把自己写的东西分享出来，他的空间是 <a href="http://xuchaoqian.com/">http://xuchaoqian.com/</a> ，他是一位伟大的工程师。同时我也将内容放在了
</p><ul>
<li>SAE <a href="http://dirlt.sinaapp.com/">http://dirlt.sinaapp.com/</a>
</li>
<li>BAE TODO(dirlt)：没有邀请码：（
</li>
</ul>



</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Computer System</h3>
<div class="outline-text-3" id="text-2-1">

<ul>
<li><a href="apue.html">apue</a> Unix环境高级编程(Advanced Programming Unix Environment),W. Richard Stevens的神作。笔记里面没有包含书最后的几个部分，比如终端，打印机等，因为我觉得可能大家都不太需要这个东西了。我还尝试将一些跨章节的概念整合到一起，这样比较容易从总体把握Unix编程环境。
</li>
<li><a href="simd.html">simd</a> SIMD(Single Instruction Muitple Data)单指令多数据。这个笔记其实是Intel Reference Manual中关于SIMD指令的总结。里面包含了一些理解SIMD指令需要的知识，以及对SIMD指令进行了分类。遗憾的是里面没有什么过多的例子，毕竟这个是结合场景来使用的。
</li>
<li><a href="pic-code.html">pic-code</a> 分析了一下PIC位置无关代码内部的原理以及和动态库之间的关系。通过阅读&lt;深入理解计算机系统&gt;并且结合实际的例子总结出来的。
</li>
<li><a href="gcc-asm.html">gcc-asm</a> 如何编写GCC内嵌汇编，以及一些关于GCC内嵌汇编的文章，主要是参考了GCC Manual。但是相信里面有一些理解还是模糊的。
</li>
<li><a href="encode.html">encode</a> 介绍了GB2312/GBK/GB18030/Unicode/UTF16/UTF32/UTF8这几种字符编码格式。还是觉得UTF8在设计以及实现上都是更加合理的选择。
</li>
<li><a href="tcmalloc.html">tcmalloc</a> google的开源线程缓存内存分配器，解决多线程下面内存分配效率问题。
</li>
<li><a href="snappy.html">snappy</a> google的开源压缩解压库。在满足一定压缩比率的条件下着重提升压缩和解压速度。
</li>
<li><a href="./lzf.html">lzf</a> redis使用的开源压缩解压库。轻量(两个文件)可以很容易地独立纳入项目。
</li>
<li><a href="build-system.html">build-system</a> 在实现baidu in-house的构建工具comake2之前，做过构建系统的调研总结出来的。在语法表达上面(非常重要)借鉴了SCons,考虑了其他构建系统提供的功能。
<ul>
<li><a href="mave.html">maven</a> 主要针对Java开发的基于工程对象模型(POM, Project Object Model)构建系统，主要记录了一些使用方面的问题和解决办法。
</li>
</ul>

</li>
<li><a href="oprofile.html">oprofile</a> OProfile(系统级profiler)的原理和应用。不过说实话没有分析过源代码(或者是自己技术背景不行)终究觉得对这个东西理解不够深入，而且自己也仅仅是使用OProfile功能的子集。
</li>
<li><a href="swig.html">swig</a> C/C++多语言扩展接口生成器，使用起来非常方便(至于生成的代码没有看过效率如何).个人觉得比较适合quick &amp; dirty的方案。
</li>
<li><a href="git.html">git</a> 分布式版本控制系统。很多项目都在使用Git进行版本管理包括Linux Kernel, Ruby on Rails, WINE, X.org等。
</li>
<li><a href="ubuntu.html">ubuntu</a> 如何更好地使用ubuntu，<a href="note/struggle-with-ubuntu.html">之前有过痛苦的经历</a> 。主要记录自己使用出现的问题。
</li>
<li><a href="emacs.html">emacs</a> 如何更好地使用Emacs。自己依然只是使用一些简单功能，身边有很多牛人用Emacs那是相当的出神入化。
</li>
<li><a href="linux.html">linux</a> 主要是介绍Linux下面一些工具使用以及和内核相关的知识。（将原来<a href="./APUE.html">APUE</a> 和 <a href="./UNP.html">UNP</a> 中的一部分内容放在这里面来了，这样可以保持这两篇内容比较稳定）
<ul>
<li><a href="./cpu.html">cpu</a> cpu
</li>
<li><a href="./memory.html">memory</a> 内存
</li>
<li><a href="./coroutine.html">coroutine</a> 协程
</li>
<li><a href="./lock.html">lock</a> 锁
</li>
<li><a href="./continuation.html">continuation</a> 延续
</li>
<li><a href="./sysperf">sysperf</a> 系统性能
</li>
</ul>

</li>
<li><a href="fvwm.html">fvwm</a> F* Virtual Windows Manager.Linux下面高度可定制化的窗口管理器。
</li>
<li><a href="./mac.html">mac</a> 如何更好地使用mac。以前使用windows，后来转向ubuntu，再后来买了个air，熟悉mac又需要一段时间了。
</li>
<li><a href="./license.html">license</a> 一些常见的开源协议。不知道自己以后是否可以用得上：）
</li>
<li><a href="./eclipse.html">eclipse</a> 虽然我喜欢emacs，但是似乎java方面开发似乎还是离不开它。
</li>
<li><a href="./algorithm.html">algorithm</a> 算法还是非常重要的。记录的都是现实中使用到的算法或者是比较有趣的数学问题吧。
</li>
<li><a href="./data-mining.html">data-mining</a> 了解一些数据挖掘方面的知识还是比较有帮助的。其实我们每天都在不知不觉地进行数据挖掘。
</li>
</ul>


</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Network Programming</h3>
<div class="outline-text-3" id="text-2-2">

<ul>
<li><a href="unp.html">unp</a> Unix网络编程(Unix Network Programming),W. Richard Stevens的又一神作。笔记里面只是对于TCP原理有比较详细讨论，这部分笔记也包含了TCP Illustrated v1里面和TCP相关的章节内容。对于编程方面也着重TCP socket使用，毕竟在大部分应用场景下面我们选用TCP模型更多，并且TCP里面有很多非常琐碎的知识。
</li>
<li><a href="https://github.com/dirtysalt/sperm/tree/master/code/cc/itachi">itachi</a> 自己两天时间写完的异步网络编程框架，当然有很多地方需要改进，但是内核基本稳定了。并且在上面做了asocket封装，编写网络程序非常方便。TODO(dirlt):是否需要专门写篇文章介绍
</li>
<li><a href="./libev.html">libev</a> 开源的事件触发器。被认为是更高效的libevent.itachi这个项目开始想自己编写事件触发器，但是发现工作比较琐碎枯燥，所以底层还是选择使用libev.
</li>
<li><a href="hpserver.html">hpserver</a> 开源的网络编程框架。可以当做一个入门级的网络编程框架阅读。这个是我最开始阅读的网络编程框架(1st).
</li>
<li><a href="./nmstl.html">nmstl</a> 开源的网络编程框架。一个很早期的作品，代码十分简洁。主要是内部实现了SEDA的思想。这个是我第二个阅读的网络编程框架(2nd).
</li>
<li><a href="muduo.html">muduo</a> 开源的网络编程框架。作者理想中的网络编程框架实现，里面有很多mina/netty的影子。这个是我三个阅读的网络编程框架(3rd).
</li>
<li><a href="kylin.html">kylin</a> baidu in-house的异步编程框架。linsd的神作，通过阅读这个框架的代码让我理解了异步编程模型。这个是我第四个阅读的网络编程框架(4th).
</li>
<li><a href="zeromq.html">zeromq</a> 开源的消息传输系统。颠覆我们思考和编写网络通信程序的方式。TODO(dirlt):只是阅读了文档和API，可以考虑阅读一下代码.
</li>
<li><a href="ace.html">ace</a> 开源的网络编程框架。非常重量级，也被人诟病为学术产物而不是适合生产实践。TODO(dirlt):只是有大概的了解，有待更深入的研究.
</li>
<li><a href="./apache.html">apache</a> 历史悠久的开源HTTP服务器。 an effort to develop and maintain an open-source HTTP server for modern operating systems including UNIX and Windows NT <a href="http://httpd.apache.org/">http://httpd.apache.org/</a>
</li>
</ul>


</div>

</div>

<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> Storage System</h3>
<div class="outline-text-3" id="text-2-3">

<ul>
<li>Readings in Database Systems <a href="http://redbook.cs.berkeley.edu/">http://redbook.cs.berkeley.edu/</a>
</li>
<li><a href="dbms.html">dbms</a> DBMS(database management system)现在正在研究。打算首先阅读一下数据库系统基础教程(A First Course in Database Systems by Jeffrey D. Ullman),然后看看另外一本也是Jeffrey D. Ullman写的数据库系统实现(Database System Implementation).主要是了解DBMS方面的理论和大致实现，之后会稍微结合现有数据库实现阅读代码(MySQL/PostgreSQL).
</li>
<li><a href="leveldb.html">leveldb</a> google的开源kv存储系统。支持billion级别的数据量，适合于写少读多的情况。当时阅读的时候是从github上面clone下来的，可能还存相当多的bug.TODO(dirlt):更深入的阅读.
</li>
<li><a href="mongodb.html">mongodb</a> 面向文档的分布式存储系统，但是却可以针对文档字段索引来加快查询。功能上比通常我们认为的NoSQL强但是弱于RDBMS.
</li>
<li><a href="redis.html">redis</a> 内存存储系统，支持丰富的数据类型以及相应的计算(支持持久化)。外围包装网络访问接口(并且提供了丰富的客户端),可以比较方便地在分布式系统内或者是环境下面使用.
</li>
<li><a href="./dsgm.html">dsgm</a> Document Synchronization based on Google Mail. <a href="https://github.com/dirtysalt/sperm/tree/master/code/py/dsgm">https://github.com/dirtysalt/sperm/tree/master/code/py/dsgm</a>
</li>
<li><a href="./mysql.html">mysql</a> 开源关系型数据库。The world's most popular open source database <a href="http://www.mysql.com/">http://www.mysql.com/</a>
</li>
<li><a href="./ssd.html">ssd</a> solid state disk.固态硬盘。
</li>
</ul>


</div>

</div>

<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> Distributed System</h3>
<div class="outline-text-3" id="text-2-4">

<ul>
<li>Distributed Systems Reading List <a href="http://dancres.org/reading_list.html">http://dancres.org/reading_list.html</a>
</li>
<li><a href="streambase.html">streambase</a> 在实现baidu in-house的分布式实时流式计算系统之前，调研的商用流式计算系统。没有办法获得源代码只能够从文档中猜测其内部实现以及参考其提供的功能与接口。
</li>
<li><a href="chubby.html">chubby</a> google为松耦合分布式系统开发的锁服务，但是在现实中还可以作为名字服务来使用。
</li>
<li><a href="gfs.html">gfs</a> google分布式基础架构的分布式文件系统。
</li>
<li><a href="./mapreduce.html">mapreduce</a> google分布式基础架构的分布式计算系统。
</li>
<li><a href="./bigtable.html">bigtable</a> google分布式基础架构的分布式表格系统。
</li>
<li><a href="hadoop.html">hadoop</a> Apache基金会开发的分布式系统基础架构。Hadoop是这个项目的总称下面包含很多子项目。
<ul>
<li><a href="hdfs.html">hdfs</a> Apache Hadoop项目的分布式文件系统，GFS的开源实现。
</li>
<li><a href="hbase.html">hbase</a> Apache Hadoop项目的分布式表格系统，BigTable的开源实现。
</li>
<li><a href="./mapred.html">mapred</a> Apache Hadoop项目的分布式计算系统，MapReduce的开源实现。
</li>
<li><a href="./zookeeper.html">zookeeper</a> Apache Hadoop项目的分布式锁服务，Chubby的开源实现。
</li>
<li><a href="oozie.html">oozie</a> Apache Hadoop项目的工作流系统，可以将多个map-reduce作业组合到一个逻辑单元中。支持作业之间的相互依赖，同时允许时间以及数据来触发作业。
</li>
</ul>

</li>
</ul>


</div>

</div>

<div id="outline-container-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> Programming Language and Design Pattern</h3>
<div class="outline-text-3" id="text-2-5">

<ul>
<li><a href="./prog-lang.html">prog-lang</a> including following languages:     
<ul>
<li><a href="cpp.html">C/C++</a> # C++ (pronounced "cee plus plus") is a statically typed, free-form, multi-paradigm, compiled, general-purpose programming language. It is regarded as an intermediate-level language, as it comprises a combination of both high-level and low-level language features. <a href="http://en.wikipedia.org/wiki/C++">Wikipedia</a>
</li>
<li><a href="scheme.html">Scheme</a> # Scheme is a functional programming language and one of the two main dialects of the programming language Lisp. <a href="http://en.wikipedia.org/wiki/Scheme_(programming_language)">Wikipedia</a>
</li>
<li><a href="java.html">Java</a> # Java is a programming language originally developed by James Gosling at Sun Microsystems (which has since merged into Oracle Corporation) and released in 1995 as a core component of Sun Microsystems' Java platform. The language derives much of its syntax from C and C++ but has a simpler object model and fewer low-level facilities. <a href="http://en.wikipedia.org/wiki/Java_(programming_language)">Wikipedia</a>
</li>
<li><a href="clojure.html">Clojure</a> # Clojure (pronounced like "closure") is a recent dialect of the Lisp programming language created by Rich Hickey. It is a functional general-purpose language. Its focus on programming with immutable values and explicit progression-of-time constructs are intended to facilitate the development of more robust programs, particularly multithreaded ones. <a href="http://en.wikipedia.org/wiki/Clojure">Wikipedia</a>
</li>
<li><a href="python.html">Python</a> # Python is a general-purpose, high-level programming language whose design philosophy emphasizes code readability. Its syntax is said to be clear and expressive. Python has a large and comprehensive standard library. <a href="http://en.wikipedia.org/wiki/Python_(programming_language)">Wikipedia</a>
</li>
</ul>

</li>
<li><a href="design-pattern.html">design-pattern</a> 将书&lt;Design Patterns: Elements of Reusable Object-Oriented Software&gt;中要表达的思想按照自己的意思整理出来(后面可能会添加一些自己的"设计模式"吧:)。不过我倒是觉得没有必要在使用中刻意地去拼凑使用某种模式，相反应该让模式渗入到自己的思想中去，指导自己写出更加优美更加可维护的代码，而不用在意"我使用了哪种模式". 然后现在我开始逐渐认同一个观点，那就是"设计模式是语言表达能力存在缺陷的一种表现".
</li>
</ul>


</div>

</div>

<div id="outline-container-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> Note</h3>
<div class="outline-text-3" id="text-2-6">

<ul>
<li><a href="./note/diary.html">diary</a> 记录日常的事情以及自己的想法。提醒一下，其内容可能过于琐碎或者是无聊：）
<ul>
<li><a href="note/struggle-with-ubuntu.html">折腾Ubuntu</a>
</li>
<li><a href="note/switch-back-to-windows.html">切换回windows</a>
</li>
<li><a href="note/purchase-compaq-notebook.html">购买compqa笔记本</a>
</li>
<li><a href="./note/visit-tj-data-center.html">参观天津机房</a>
</li>
<li><a href="./note/baidu-bit-shanghai-route.html">百度BIT上海行程</a>
</li>
<li><a href="./note/retrospect-2009.html">回顾2009</a>
</li>
<li><a href="./note/graduate-final-report.html">研究生答辩</a>
</li>
<li><a href="./note/talk-with-luoyan.html">和罗琰的谈话</a>
</li>
<li><a href="./note/cola-and-water.html">可乐和矿泉水</a>
</li>
<li><a href="./note/get-marriage-identity.html">领证经历</a>
</li>
<li><a href="./note/purchase-mba.html">购买MacBookAir</a>
</li>
<li><a href="note/okr.html">Objectives and Key Results</a>
</li>
<li><a href="note/2012-birthday.html">2012生日</a>
</li>
<li><a href="note/as-child-in-warm-house.html">温室长大的孩子</a>
</li>
</ul>

</li>
<li><a href="./note/todo.html">todo</a> 记录自己日常需要完成的事情。
</li>
<li><a href="./note/travel.html">travel</a> 要不读书、要不旅行。心和身体， 得有一个在路上。
</li>
<li><a href="./note/fun.html">fun</a> 搞笑的文字。
</li>
<li><a href="note/movie.html">movie</a> 电影的一些经典台词和对白。
</li>
<li><a href="note/lyric.html">lyric</a> 有时候歌词也是可以打动人的。
</li>
<li><a href="./note/pregnancy.html">pregnancy</a> 怀孕需要注意的一些事情。
</li>
<li><a href="note/health.html">health</a> 拥有健康的身体才能够更好地享受生活和工作。
</li>
<li><a href="./note/recipe.html">recipe</a> 菜谱。是谁说的，活着就是为了更好的吃：）
</li>
<li><a href="./note/book.html">book</a> 自己看过的一些书，可能不太好分类所以全部放在这里了。
</li>
<li><a href="note/excerpt.html">excerpt</a> 网络上的一些摘抄。
</li>
<li><a href="note/house.html">house</a> 住房问题。在天朝这是一个大问题。
</li>
<li><a href="note/to-death.html">to-death</a> 给离去的亲人们。
</li>
<li><a href="note/naruto.html">naruto</a> 火影忍者，你懂的。
</li>
</ul>


</div>
</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2012-08-29 16:56:26 CST</p>
<p class="creator">Org version 7.8.02 with Emacs version 23</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
<html><body>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F54a700ad7035f6e485eaf2300641e7e9' type='text/javascript'%3E%3C/script%3E"));
</script></body></html>